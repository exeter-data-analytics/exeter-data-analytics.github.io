<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="MD Sharma">
<meta name="author" content="Stephen Lang">
<meta name="dcterms.date" content="2025-06-16">
<meta name="description" content="Introduction to Openstack at the University of Exeter">

<title>intRos: Introduction to OpenStack – ExeDataHub</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-b4a84a8459484eba25bf60977b05180a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">ExeDataHub</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../series.html"> 
<span class="menu-text">Series</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../presentations.html"> 
<span class="menu-text">Presentations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">Walkthroughs</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/exeter-data-analytics/exeter-data-analytics.github.io"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">intRos: Introduction to OpenStack</h1>
                  <div>
        <div class="description">
          Introduction to Openstack at the University of Exeter
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">HPC</div>
                <div class="quarto-category">OpenStack</div>
                <div class="quarto-category">Virtual Machine</div>
              </div>
                  </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">MD Sharma </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              University of Exeter
            </p>
        </div>
      <div class="quarto-title-meta-contents">
      <p class="author">Stephen Lang </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              University of Exeter
            </p>
        </div>
    </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 16, 2025</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">June 16, 2025</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link active" data-scroll-target="#learning-objectives"><span class="header-section-number">1</span> Learning objectives</a></li>
  <li><a href="#outline" id="toc-outline" class="nav-link" data-scroll-target="#outline"><span class="header-section-number">2</span> Outline</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">3</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#some-terminology" id="toc-some-terminology" class="nav-link" data-scroll-target="#some-terminology"><span class="header-section-number">3.1</span> Some Terminology</a></li>
  <li><a href="#why-use-virtual-machines" id="toc-why-use-virtual-machines" class="nav-link" data-scroll-target="#why-use-virtual-machines"><span class="header-section-number">3.2</span> Why Use Virtual Machines?</a>
  <ul class="collapse">
  <li><a href="#the-power-of-full-control" id="toc-the-power-of-full-control" class="nav-link" data-scroll-target="#the-power-of-full-control">The Power of Full Control</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#logging-into-the-console" id="toc-logging-into-the-console" class="nav-link" data-scroll-target="#logging-into-the-console"><span class="header-section-number">4</span> Logging Into the Console</a></li>
  <li><a href="#create-your-instance" id="toc-create-your-instance" class="nav-link" data-scroll-target="#create-your-instance"><span class="header-section-number">5</span> Create your Instance</a>
  <ul class="collapse">
  <li><a href="#security-groups" id="toc-security-groups" class="nav-link" data-scroll-target="#security-groups">Security Groups</a></li>
  <li><a href="#key-pairs-and-cloud-config" id="toc-key-pairs-and-cloud-config" class="nav-link" data-scroll-target="#key-pairs-and-cloud-config">Key Pairs and Cloud Config</a></li>
  </ul></li>
  <li><a href="#connecting-to-your-instance" id="toc-connecting-to-your-instance" class="nav-link" data-scroll-target="#connecting-to-your-instance"><span class="header-section-number">6</span> Connecting to your Instance</a>
  <ul class="collapse">
  <li><a href="#command-line-connection" id="toc-command-line-connection" class="nav-link" data-scroll-target="#command-line-connection">Command Line Connection</a></li>
  <li><a href="#console-connection-using-the-browser" id="toc-console-connection-using-the-browser" class="nav-link" data-scroll-target="#console-connection-using-the-browser">Console connection using the browser</a></li>
  <li><a href="#graphical-connection-using-x2go" id="toc-graphical-connection-using-x2go" class="nav-link" data-scroll-target="#graphical-connection-using-x2go">Graphical connection using X2Go</a></li>
  </ul></li>
  <li><a href="#managing-your-openstack-instances" id="toc-managing-your-openstack-instances" class="nav-link" data-scroll-target="#managing-your-openstack-instances"><span class="header-section-number">7</span> Managing Your OpenStack Instances</a>
  <ul class="collapse">
  <li><a href="#find-your-instance" id="toc-find-your-instance" class="nav-link" data-scroll-target="#find-your-instance">Find your instance:</a></li>
  <li><a href="#stopping-your-instance" id="toc-stopping-your-instance" class="nav-link" data-scroll-target="#stopping-your-instance">Stopping Your Instance:</a></li>
  <li><a href="#rebuilding-your-instance" id="toc-rebuilding-your-instance" class="nav-link" data-scroll-target="#rebuilding-your-instance">Rebuilding Your Instance:</a></li>
  <li><a href="#restarting-your-instance" id="toc-restarting-your-instance" class="nav-link" data-scroll-target="#restarting-your-instance">Restarting Your Instance:</a></li>
  <li><a href="#deleting-an-instance." id="toc-deleting-an-instance." class="nav-link" data-scroll-target="#deleting-an-instance.">Deleting an instance.</a></li>
  </ul></li>
  <li><a href="#specific-use-cases" id="toc-specific-use-cases" class="nav-link" data-scroll-target="#specific-use-cases"><span class="header-section-number">8</span> Specific Use Cases</a>
  <ul class="collapse">
  <li><a href="#allowing-access-to-rstudio-server" id="toc-allowing-access-to-rstudio-server" class="nav-link" data-scroll-target="#allowing-access-to-rstudio-server"><span class="header-section-number">8.1</span> Allowing access to RStudio Server</a></li>
  <li><a href="#allowing-access-to-remote-desktop-protocol" id="toc-allowing-access-to-remote-desktop-protocol" class="nav-link" data-scroll-target="#allowing-access-to-remote-desktop-protocol"><span class="header-section-number">8.2</span> Allowing access to Remote Desktop Protocol</a></li>
  <li><a href="#using-vscode-to-interact-with-this-instance" id="toc-using-vscode-to-interact-with-this-instance" class="nav-link" data-scroll-target="#using-vscode-to-interact-with-this-instance"><span class="header-section-number">8.3</span> Using VSCode to interact with this <em>Instance</em></a></li>
  </ul></li>
  <li><a href="#acknowledgements" id="toc-acknowledgements" class="nav-link" data-scroll-target="#acknowledgements"><span class="header-section-number">9</span> Acknowledgements</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="learning-objectives" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Learning objectives</h1>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>By the end of this workshop you will be expected to:</strong></p>
<ul>
<li>Know how to access the UoE OpenStack Console.</li>
<li>Know how to configure and start your OpenStack <em>Instance.</em></li>
<li>Know how to connect to your OpenStack <em>Instance</em> from your own computer.</li>
<li>Know how to manage your OpenStack <em>Instances</em>.</li>
<li>Know how to make use of your <em>Instance</em> for specific use cases.</li>
<li>Know where to ask for help and how to ask for help.</li>
</ul>
</div>
</div>
</section>
<section id="outline" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Outline</h1>
<p>This course will give you an introduction into the Openstack Cloud Environment. OpenStack allows you to set up a private computer within the University’s Advanced Research Computing ecosystem. <a href="https://www.openstack.org/software/">Click here to learn more about OpenStack.</a> Several other courses in our series will use OpenStack and you may later use it for your own research.</p>
<p>We are going to introduce a lot of new concepts. Here is an overview of the 3 steps you need to start your course.</p>
<ol type="1">
<li><p><strong>Openstack Console</strong></p>
<p>First log onto the OpenStack console: <a href="https://stack.exeter.ac.uk" class="uri">https://stack.exeter.ac.uk</a> Use the information in the OpenStack Console section of the provided document to log on. Follow the sections “Introduction” and “Tour of OpenStack Cloud” in the course material.</p></li>
<li><p><strong>Create your training Instance.</strong></p>
<p>Follow the sections “Create our Instance” in the course material. Use the information in the “OpenStack Image” section of the provided document.</p></li>
<li><p><strong>Login to your instance.</strong></p>
<p>The course notes explain 3 ways to connect to your instance (X2Go, PuTTy and MobaXterm). You only need to use one of these.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Managing your instance
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="./manage.html">Here are some instructions</a> on how to stop and start your instances at the start of end of each session.</p>
</div>
</div></li>
</ol>
</section>
<section id="introduction" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Introduction</h1>
<p>For this workshop we will provide an overview of the internal OpenStack provision, part of the University of Exeter’s Advanced Research Computing facilities and see how, as researchers, we can use this flexible resource to get work done efficiently.</p>
<p>You should be able to access OpenStack and all of the functionality below via your own account to do your research. The aim of this workshop is to give you an introduction to OpenStack and Unix so you are ready to take full advantage of its capabilities!</p>
<p>Firstly some concepts and terminology might be confusing so here is some explanation of the advantages of using OpenStack.</p>
<section id="some-terminology" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="some-terminology"><span class="header-section-number">3.1</span> Some Terminology</h2>
<p><strong><em>An Image:</em></strong> This is the starting point or template for the course. Think of it as a master copy of the computer which contains all the programs and data that are required to follow the course. We will use it as a template to start your own Instance.</p>
<p><strong><em>An Instance:</em></strong> Almost the first thing you will do is create your own copy of the image - we call this an instance or a virtual machine. It contains everything that was in the image plus any files you create during the course.</p>
<p><strong><em>A Volume</em></strong> This can be thought of as an additional hard disk which you can add or remove from an instance.</p>
<p><strong><em>Remote Desktop</em></strong> We can’t plug a monitor and keyboard into a virtual machine (instance) so we need a program on our computer which connects to the instance allows us to see and control the instance from our desktop. In the course we will use a program called X2Go.</p>
<p><strong><em>Command Line Client</em></strong> It is not really necessary to connect to an instance using remote desktop software. It is possible to connect only via a command line interfaces - you will not get any menus, icons images - you will only be able to type commands to tell the instance what you want to do.</p>
</section>
<section id="why-use-virtual-machines" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="why-use-virtual-machines"><span class="header-section-number">3.2</span> Why Use Virtual Machines?</h2>
<p>Instead of relying on dedicated physical hardware for every task, <strong>virtual machines (VMs)</strong> offer a highly flexible and efficient alternative. Imagine a scenario where you have a set number of powerful physical computers. Rather than assigning one computer to each user, VMs allow you to <strong>pool the resources</strong> of these physical machines and then divide them into multiple isolated virtual environments.</p>
<p>This approach offers significant advantages:</p>
<ul>
<li><p><strong>Optimal Resource Utilization:</strong> Physical machines often sit idle or are underutilized. VMs allow you to share resources like disk space, memory, and processors among many virtual instances. This means you can run more virtual machines than you have physical ones, making the most of your hardware. When a VM isn’t heavily used, its resources can be dynamically allocated to other, more active VMs.</p></li>
<li><p><strong>Cost and Environmental Benefits:</strong> By maximizing hardware utilization, you can reduce the number of physical servers needed. This translates to lower initial purchasing costs, reduced energy consumption for operation and cooling, and a smaller physical footprint. This makes virtual machines a <strong>greener option</strong> in many cases, contributing to sustainability efforts.</p></li>
</ul>
<section id="the-power-of-full-control" class="level3">
<h3 class="anchored" data-anchor-id="the-power-of-full-control">The Power of Full Control</h3>
<p>One of the most compelling reasons to use virtual machines is the <strong>full control you gain over your environment</strong>. Each virtual machine acts like an independent computer, allowing you to configure and customize it precisely to your needs.</p>
<p>Here’s how this translates into practical benefits:</p>
<ul>
<li><p><strong>Instant Provisioning and Customization:</strong> You can quickly launch new virtual machines with a wide variety of pre-configured <strong>machine images</strong>. These images can range from basic operating systems to specialized environments equipped with specific software for scientific modeling, data analysis, or development. This eliminates the need for lengthy manual installations and configurations.</p></li>
<li><p><strong>Share and Collaborate with Ease:</strong> If you’ve developed a specific computational environment or analysis workflow, you can create and share your own VM images. This allows collaborators to instantly access and replicate your setup, ensuring consistency and simplifying the sharing of complex projects.</p></li>
<li><p><strong>Dynamic Resource Scalability:</strong> Need more storage or processing power for a task? With VMs, you can often <strong>add storage on-the-fly</strong> by attaching virtual volumes, or <strong>increase processing power and RAM with just a few clicks</strong>. This agility means you can adapt your environment as your computational demands change, without the need for physical hardware upgrades or downtime.</p></li>
<li><p><strong>Flexible Testing and Development:</strong> VMs are invaluable for researchers. You can easily create a machine to test the inner workings of the code you are developing before deploying them to larger, more complex systems. This isolated testing environment prevents conflicts and ensures smooth transitions.</p></li>
</ul>
<p>Essentially, virtual machines empower you to create, modify, and manage your computational environment with unparalleled flexibility, giving you complete command over your digital workspace.</p>
<p>Let’s go to the next section and learn about the OpenStack Console.</p>
</section>
</section>
</section>
<section id="logging-into-the-console" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Logging Into the Console</h1>
<p>In addition to being extremely comprehensive, the Exeter OpenStack cloud has a relatively easy (but detailed!) interface for interacting with its offerings. All you have to do is log in via a web-browser and most of the functionality of the system is available for you and relatively easy to use.</p>
<p>To get started go to the following URL and login with your University of Exeter username (in the format of <em>user123</em>) the domain (exeter.ac.uk), and the password you use when logging onto your university resources.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>We have set up a single workshop project which we will be using for training. Please do <strong>NOT</strong> abuse this project and do <strong>NOT</strong> put any personal, confidential or important data on the machines you will set-up during the training. You will all log in to the same management console and will be able to see machines which your friends and colleagues on the course will start.</p>
</div>
</div>
<section id="httpsstack.exeter.ac.uk" class="level4">
<h4 class="anchored" data-anchor-id="httpsstack.exeter.ac.uk"><a href="https://stack.exeter.ac.uk/" class="uri">https://stack.exeter.ac.uk/</a></h4>
<p><img src="img/openstack-login-01.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>This resource is only accessible within the University of Exeter network. So, if you are accessing this workshop from home or anywhere outside the campuses, you will need to connect to the University VPN service to be able to access the system. If using WiFi on campus, please use Eduroam or UoE_Secure only.</p>
</div>
</div>
<p>Once logged in, you will see a web-page that looks similar to this:</p>
<p><img src="img/openstack-console-01.png" class="img-fluid"></p>
<p>As a first step - let’s associate ourselves with the correct project. This is specially important for all users who may have access to multiple “projects” associated with their research groups. In this instance, please click on the <em>Project</em> dropdown and select <em>ARC_Intro_Penryn - Workshop</em>&nbsp;as your project. If done correctly, you should see a tick mark next to the selected project, as illustrated below.</p>
<p><img src="images/clipboard-739322012.png" class="img-fluid"></p>
<p>We can now take a look at the various tabs. These include:</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Instances
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is the list of virtual machines that have been created.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Compute
</div>
</div>
<div class="callout-body-container callout-body">
<p>The service OpenStack is known for. It enables you to create Linux and Windows Virtual machines. Best of all their computational and/or disk capacity can be increased or decreased at the click of a button! This section has most of the things we need for this course.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Volumes
</div>
</div>
<div class="callout-body-container callout-body">
<p>A storage unit. These can be created and attached to any compute which you have running. Ideal for moving large amounts of data between machines. Think of it as a removable hard drive which you can attach to any machine.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Images
</div>
</div>
<div class="callout-body-container callout-body">
<p>These are the templates from which you create instances.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Object store
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is another type of storage, but is relatively slow. It is ideal for archive or when storing large files (i.e.&nbsp;several GB).However, it is currently disabled on the system. if you want to know more about it, please as your Research IT support team for assistance.</p>
</div>
</div>
<p>Click on “Compute” and then “Overview” at the top left.</p>
<p>On this page you’ll get a summary of the state for your account. You can see an example below.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that we are using a shared project where you’ll also see everyone else’s instances. If you were using your own <em>project</em> (or your research group’s project), you would only see your instances (or that of your research group).</p>
</div>
</div>
<p><img src="img/openstack-console-03.png" class="img-fluid"></p>
<p>You see here that we have a certain allocation of resources (memory, disk space, CPUs). We can choose how to allocate these to accomplish our scientific goals. For instance, we may need one very large machine with lots of resource to do a single task (e.g.&nbsp;a genome assembly). Or we may want lots of smaller machines, each doing a small task (e.g.&nbsp;a webserver and a database server). We may want half the machines running Unix and the other half running Windows. The point is, <strong><em>we</em></strong> are in control of the compute and can choose what suits <strong><em>us</em></strong> best and it can all be done, by us at the touch of a button.</p>
<p>In the example above, we have been allocated up-to 32 instances and a total of 32 cores with roughly 60GB of RAM so that each of the workshop attendees can spin up a virtual machine with 1<em>vCPU and 2GB of RAM.</em></p>
<p>Click on “Compute” and then “Instances” at the top left. When this tutorial was created, there were no existing instances within the workshop project, so, those of you following this tutorial within the second workshop, will see a page with <em>No items to display</em> and anyone who sign in after a few instances have been created, would see a list of instances that pre-exist at that time.<br>
<br>
<img src="img/openstack-console-04.png" class="img-fluid"></p>
<p><em>Ok, so how do we actually do all this?</em> Well, from this page we can create our own servers on Exeter’s OpenStack using an image of a machine the Research IT team have created earlier for you. Servers which are created in this manner are called ‘<em>Instances</em>’. We can create as many servers as we like, start them, log-in to them, do some work, transfer data to/from them or destroy them altogether. We let the Research IT team worry about the hardware, power, cooling and maintenance - all we need to do is specify how powerful a computer we want (tiny, small, medium, large or extra-large).</p>
<p>The reason we are using the OpenStack here is that many of you have to analyse large datasets. But you only need to cruch those datasets occasionally. In the case of high-throughput sequencing data (e.g.&nbsp;Illumina or Oxford Nanopore) you will find that your desktop PC may not be powerful enough to cope with the data. Also installing and configuring many pieces of software (often written by other scientists), is frequently painful as they often require other programs (also often written by other scientists) to be installed as well. Factor in some obscure incompatibility and you can quickly end up in a situation where two programs that you need refuse to co-exist. With OpenStack, you can just start a server instance based on an image created by someone else who has already done all the hard work of installation and configuration. You may also want to use an existing docker- or singularity- container within such an instance to carry out your workflow.</p>
<p>So let’s get on and launch our first instance!</p>
</section>
</section>
<section id="create-your-instance" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Create your Instance</h1>
<p>In this section of the workshop we will create our <em>Instance</em> in Exeter’s OpenStack system.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you have an instance from a previous session do not create another one. Please go to the <a href="#managing-your-openstack-instances">Managing Your OpenStack Instances</a> and restart your existing instance.</p>
<p>Otherwise let’s get on and launch the instance we need for our workshop !</p>
</div>
</div>
<p>Click on the “Launch Instance” button.</p>
<p><img src="img/openstack-console-05.png" class="img-fluid"></p>
<p>Give your instance your name (e.g.&nbsp;“Jane Doe’s Instance”)</p>
<p><img src="img/openstack-console-06.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember that everyone is sharing the same project- so you will need to be identify your instance from everyone elses. The example above (“<em>my_first_VM</em>”) may be suitable for your own project, but it is not appropriate in a shared project.</p>
</div>
</div>
<p>Click ‘Next’ and proceed to choose the image of the machine you want to replicate. In this example, we will be using the Ubuntu 22.04 server image. Click on the highlighted arrow across from the <em>“ubuntu_22.04”</em> name and input a <em>Volume Size</em> of 20GB. Make sure to toggle the <em>Delete Volume on Instance Delete</em> option in this case.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you are making your own VMs, within your own research project, you may choose to use different options based on your needs. Here, we have limited resources available for the workshop, so we need to make sure that everyone follows the instructions.</p>
</div>
</div>
<p><img src="img/openstack-console-07.png" class="img-fluid"></p>
<p>Click Next and select the desired flavour for this instance. Here, we would like you to select the <em>ARC_Intro_Penryn - small</em> flavour that will allow you to launch an instance with 1vCPU and 2GB of RAM. When you register your own project for access to OpenStack, you will see additional options for these flavours.</p>
<p><img src="img/openstack-console-08.png" class="img-fluid"></p>
<section id="security-groups" class="level3">
<h3 class="anchored" data-anchor-id="security-groups">Security Groups</h3>
<p>Click ‘Next’ to move on through Networks and Network Ports section and arrive at the Security Groups section. Here, click on the default security group to expand it, and to have a look at what has already been allowed through the firewall.</p>
<p><img src="img/openstack-console-09.png" class="img-fluid"></p>
<p>Here, we can see that SSH (port 22) has been allowed over the <em>tcp</em> protocol from <em>anywhere (0.0.0.0/0)</em>. That is all we need to begin with, so we can go ahead and click Next.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Security Groups
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you are planning on using additional software that may need some ports to be opened up, then you can create your own security group with relevant ports allowed. For e.g.&nbsp;if you want to use VNC type software for remote desktop access to your instance, you will need to allow port 5901 etc. over tcp.</p>
<p>Our recipe for this workshop includes an installation of RStudio Server Open Source edition within the VM. We will show you how to edit the default security group to allow access to port 8787 for the RStudio Server later in the tutorial.</p>
</div>
</div>
</section>
<section id="key-pairs-and-cloud-config" class="level3">
<h3 class="anchored" data-anchor-id="key-pairs-and-cloud-config">Key Pairs and Cloud Config</h3>
<p>Setting up virtual machine (VM) instances in a cloud environment like OpenStack requires robust security measures and efficient configuration methods. This section details the critical steps involved in establishing secure access using SSH keypairs and automating initial VM setup with cloud-init, providing a foundational understanding for workshop participants.</p>
<p>Click ‘Next’ to move into the Key Pair section. OpenStack leverages SSH keypairs to secure VM instances at their launch time. When an instance is provisioned, OpenStack injects the user’s public key into the appropriate authorized_keys file on the new VM, making it ready for secure SSH access using the corresponding private key held by the user.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Private Key
</div>
</div>
<div class="callout-body-container callout-body">
<p>The private key, which is the secret component, must remain securely on the user’s local workstation and should never be uploaded to the cloud provider. This distinction is crucial for maintaining the integrity of the security model.</p>
</div>
</div>
<p><img src="img/openstack-console-10.png" class="img-fluid">A key pair allows you to SSH into your newly created instance. You may select an existing key pair, import a key pair, or generate a new key pair. Click on the <em>Create Key Pair</em> button highlighted above and then enter a <em>Key Pair Name</em> and <em>Key Type</em> in the pop-up box that appears next. Key Pairs are how you login to your instance after it is launched.</p>
<p><img src="img/openstack-console-11.png" class="img-fluid"></p>
<p>Choose a key pair name you will recognize. Here we chose <em>user123_computer_name_projectX</em> to remind ourselves what the default username as and which VM this key is associated with. Names may only include alphanumeric characters, spaces, or dashes. Once the Key Pair is generated, you will need to copy the Private Key to your clipboard and save it in a safe space. Do not forget where you keep this key - you will not be able to login to the instance without this key pair if you have not enabled any other login mechanism.</p>
<p><img src="img/openstack-console-12.png" class="img-fluid"></p>
<p>Once copied, click <em>Done.</em> Open a text editor like Notepad++, Context or similar and save this SSH Key. The image below shows the successfully created <em>Key Pair.</em> On most browsers, the key pair will automatically get downloaded when you click done as well.</p>
<p><img src="img/openstack-console-13.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key Pair vs Password
</div>
</div>
<div class="callout-body-container callout-body">
<p>The choice of authentication method for remote access significantly impacts the security and operational efficiency of cloud environments. While password-based authentication is familiar, SSH keypair authentication offers substantial advantages, making it the preferred standard in cloud platforms like OpenStack.<br>
<br>
Password authentication relies on a user remembering a secret string (the password) and providing it to the server for verification.<br>
<br>
SSH keypair authentication provides a superior level of cryptographic strength that even extremely long, complex passwords cannot match. The public keys, generated using sophisticated mathematical algorithms, are virtually impossible to guess or brute-force, offering a robust defense against common attack vectors - as long as un-authorized users do not gain access to your private key.</p>
</div>
</div>
<p>Click Next to move on to the <em>Configuration</em> section<em>.</em></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cloud Config
</div>
</div>
<div class="callout-body-container callout-body">
<p>Beyond establishing secure access, automating the initial configuration of virtual machines is crucial for efficiency, consistency, and scalability in cloud environments. Cloud-init serves as the industry-standard tool for this purpose.</p>
</div>
</div>
<p>When a new cloud instance is deployed, cloud-init takes initial configuration data, often referred to as “user-data” or “vendor-data,” and automatically applies these settings during the instance’s first boot process. This functions much like a dynamic to-do list that cloud-init executes, configuring the VM according to predefined instructions. The significant advantage of cloud-init lies in its ability to reuse these configuration instructions across numerous deployments, consistently producing reliable results.</p>
<p>Cloud-init is capable of handling a wide array of initial configuration tasks. These include essential activities such as setting the hostname, configuring network interfaces, creating and managing user accounts, installing necessary software packages, and executing custom scripts. This comprehensive automation streamlines the deployment process, ensuring that all cloud instances are configured uniformly, thereby minimizing the potential for human error.</p>
<p>Below are two minimal cloud-init script examples to configure essentials such as adding a local user account with ability to install research related applications (e.g.&nbsp;<code>sudo apt install package-name</code>). This will be all you really need for most use cases, but for additional configuration options, please refer to the cloud-init documentation.</p>
<p>We recommend that you use the Option 2 example for this workflow. Amend the settings as required to look as below (changing&nbsp;the ‘<em>user123</em>’, ‘<em>Your Name</em>’ and <em>hashed_passwd</em> lines):</p>
<div id="option-1" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Option 1
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use this config if you only want key-pair authentication:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#cloud-config</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use this config if you only want key-pair authentication.</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Change the default user to the name of my choice.</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># and give it sudo rights.</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">system_info</span><span class="kw">:</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">default_user</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">name</span><span class="kw">:</span><span class="at"> user123</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">gecos</span><span class="kw">:</span><span class="at"> </span><span class="st">"Your Name"</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">groups</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">sudo</span><span class="kw">]</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">sudo</span><span class="kw">:</span><span class="at"> ALL=(ALL) NOPASSWD:ALL</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">shell</span><span class="kw">:</span><span class="at"> /bin/bash</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Update system package database</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">package_update</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Upgrade all packages to the latest versions</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">package_upgrade</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Install specified basic tools using the package manager</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">packages</span><span class="kw">:</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> openssh-server</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> xubuntu-default-settings</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> xubuntu-desktop</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> xrdp</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> nload</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> htop</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> vim</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> multitail</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> tmux</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> r-base</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> gdebi-core</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> x2goserver</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> x2goserver-xsession</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> xfce4</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> xfce4-goodies</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Mamba using the Miniforge distribution</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="fu">runcmd</span><span class="kw">:</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> echo "Starting Miniforge installation..."</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> wget -O /tmp/Miniforge3.sh "https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-$(uname)-$(uname -m).sh"</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> chmod +x /tmp/Miniforge3.sh</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> /tmp/Miniforge3.sh -b -p /opt/miniforge3</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> echo "Miniforge installation complete. Initializing conda for all users..."</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> /opt/miniforge3/bin/conda init bash --system</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> echo "Conda initialization for all users complete. Users may need to log out and back in."</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> echo "Installing RStudio Server Open Source v2025.05.1+513 ..."</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> wget -O /tmp/RStudio_Server.deb https://download2.rstudio.org/server/jammy/amd64/rstudio-server-2025.05.1-513-amd64.deb</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> gdebi -n /tmp/RStudio_Server.deb</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> echo "Enabling Lightdm and XRDP ..."</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> systemctl enable --now lightdm</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> systemctl enable --now xrdp</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> systemctl set-default graphical.target</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="fu">power_state</span><span class="kw">:</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">delay</span><span class="kw">:</span><span class="at"> </span><span class="dv">0</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">mode</span><span class="kw">:</span><span class="at"> reboot</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">message</span><span class="kw">:</span><span class="at"> </span><span class="st">"Rebooting instance after cloud-init completion"</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">condition</span><span class="kw">:</span><span class="at"> </span><span class="ch">True</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="option-2" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Option 2
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use this config if you want password authentication (or password authentication alongside key pair auth as an alternative shown earlier)</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#cloud-config</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Change the default user to the name of my choice.</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># and give it sudo rights.</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">system_info</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">default_user</span><span class="kw">:</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">name</span><span class="kw">:</span><span class="at"> user123</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">gecos</span><span class="kw">:</span><span class="at"> </span><span class="st">"Your Name"</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">sudo</span><span class="kw">:</span><span class="at"> ALL=(ALL) NOPASSWD:ALL</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">shell</span><span class="kw">:</span><span class="at"> /bin/bash</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">lock_passwd</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">hashed_passwd</span><span class="kw">:</span><span class="at"> “$6$rTACxh6 ... &lt;snip&gt; ... xwWllho2N7nKq1nn1”</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># You have to keep the $6$ in front of the hashed password</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable password auth </span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh_pwauth</span><span class="kw">:</span><span class="at"> </span><span class="ch">True</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Update system package database</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="fu">package_update</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Upgrade all packages to the latest versions</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="fu">package_upgrade</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Install specified basic tools using the package manager</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="fu">packages</span><span class="kw">:</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> openssh-server</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> xubuntu-default-settings</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> xubuntu-desktop</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> xrdp</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> nload</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> htop</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> vim</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> multitail</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> tmux</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> r-base</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> gdebi-core</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> x2goserver</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> x2goserver-xsession</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> xfce4</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> xfce4-goodies</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Mamba using the Miniforge distribution</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a><span class="fu">runcmd</span><span class="kw">:</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> echo "Starting Miniforge installation..."</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> wget -O /tmp/Miniforge3.sh "https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-$(uname)-$(uname -m).sh"</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> chmod +x /tmp/Miniforge3.sh</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> /tmp/Miniforge3.sh -b -p /opt/miniforge3</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> echo "Miniforge installation complete. Initializing conda for all users..."</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> /opt/miniforge3/bin/conda init bash --system</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> echo "Conda initialization for all users complete. Users may need to log out and back in."</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> echo "Installing RStudio Server Open Source v2025.05.1+513 ..."</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> wget -O /tmp/RStudio_Server.deb https://download2.rstudio.org/server/jammy/amd64/rstudio-server-2025.05.1-513-amd64.deb</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> gdebi -n /tmp/RStudio_Server.deb</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> echo "Enabling Lightdm and XRDP ..."</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> systemctl enable --now lightdm</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> systemctl enable --now xrdp</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> systemctl set-default graphical.target</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a><span class="fu">power_state</span><span class="kw">:</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">delay</span><span class="kw">:</span><span class="at"> </span><span class="dv">0</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">mode</span><span class="kw">:</span><span class="at"> reboot</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">message</span><span class="kw">:</span><span class="at"> </span><span class="st">"Rebooting instance after cloud-init completion"</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="fu">condition</span><span class="kw">:</span><span class="at"> </span><span class="ch">True</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Copy paste the above script into a text editor like Notepad++, Context, Sublime etc. and edit the requisite sections such as name, gecos, hashed_password etc. as needed.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Note:</strong> The ‘<strong>hashed_passwd</strong>’ string is a <strong>crypt-sha512</strong> hash (i.e., an encrypted version) of the password you will use to log in with (we advise not using your university password). Hashed passwords can be generated using a web page such as&nbsp;<a href="https://www.mkpasswd.net/index.php">https://www.mkpasswd.net</a>. You need to replace all of the ‘hashed_passwd’ field inside the double quotes with the hashed password you have generated.<br>
<img src="img/openstack-console-14.png" class="img-fluid"></p>
</div>
</div>
<p>Once you have your template ready, paste it into the <em>Customisation Script</em> section:</p>
<p><img src="img/openstack-console-15.png" class="img-fluid"></p>
<p>Click Next and skip over the Server Groups, Scheduler Hints and Metadata sections.</p>
<p><img src="img/openstack-console-16.png" class="img-fluid"></p>
<p>You have just configured an instance! Well done!<br>
<br>
In summary, you have given your instance a name, chosen which source machine image to base the instance on, selected the size of the instance (i.e.&nbsp;amount of memory, disk space and processor power), configured the basic apps you wanted to pre-install on it and also configured how you can access it (key-pair vs username+password).</p>
<p>We’re ready to launch it! Click ‘Launch Instance’. At this point you wait for the instance to come online. This may take a few seconds for a small instance or about 10 minutes for an xx-large one.</p>
<p>Below you can see an example of an instance starting up (or spawning). It is running in the University data centre. Note that we don’t need to worry or think about the underlying hardware the system is running on. That’s all taken care of for us by OpenStack and the Research IT team.</p>
<p><img src="img/openstack-console-17.png" class="img-fluid"></p>
<p>Once it turns <strong>white</strong> and the ‘Status’ changes to ‘Active’, you should copy the IP address to the clipboard.</p>
<p><img src="img/openstack-console-18.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Note</strong>: above is an example where the IP address is <em>10.121.4.147</em> (yours will be different). We will need it in a moment to connect via X2Go remote desktop. Make sure you copy the whole address and nothing but the address.</p>
</div>
</div>
<p><strong>Congratulations you have ‘configured’ and ‘turned on’ a new computer to use for the rest of this workshop.</strong></p>
<p>Next, you will learn how to connect to it from your PC.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Take a 20 minute break!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Before you proceed any further - let’s take a 20 minute break.</p>
<p>The cloud-init script would be working in the background to finish installing software and configuring your machine during that time.</p>
</div>
</div>
</section>
</section>
<section id="connecting-to-your-instance" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Connecting to your Instance</h1>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prerequisite
</div>
</div>
<div class="callout-body-container callout-body">
<p>Download and install <a href="https://wiki.x2go.org">X2Go</a> alongside a tool like Putty, MobaXTerm or Termius on your computer.<br>
<br>
The most commonly used, but basic program is <a href="https://www.putty.org/">PuTTy</a>.<br>
<br>
The one we recommend for Windows users is <a href="#0">MobaXTerm</a> - it provides all the important <strong>remote network tools</strong> (SSH, X11, RDP, VNC, FTP, MOSH, …) and <strong>Unix commands</strong> (bash, ls, cat, sed, grep, awk, rsync, …) to Windows desktop, in a <strong>single portable exe file</strong> which works out of the box.<br>
<br>
<a href="https://termius.com/">Termius</a> is another recommended SSH client that works on macOS, Windows, Linux, iOS and Andriod.<br>
<br>
End-Users are responsible for ensuring that they comply with the license conditions for any of these software.</p>
</div>
</div>
<p>Check the IP address of your instance and copy it to your clipboard.</p>
<p><img src="img/openstack-console-18.png" class="img-fluid"></p>
<section id="command-line-connection" class="level3">
<h3 class="anchored" data-anchor-id="command-line-connection">Command Line Connection</h3>
<p>The simplest way you can connect to your instance is using SSH (secure shell). If you are happy using the command line only, there are some other software that have additional functionality, and look better. There are many choices - just Google ‘windows ssh client’ or ‘OSX SSH Client’</p>
<p>The most commonly used, but basic program is <a href="https://www.putty.org/">PuTTy</a>. The one we recommend for Windows users is <a href="#0">MobaXTerm</a> - it provides all the important <strong>remote network tools</strong> (SSH, X11, RDP, VNC, FTP, MOSH, …) and <strong>Unix commands</strong> (bash, ls, cat, sed, grep, awk, rsync, …) to Windows desktop, in a <strong>single portable exe file</strong> which works out of the box.</p>
<p><a href="https://termius.com/">Termius</a> is another recommended SSH client that works on macOS, Windows, Linux, iOS and Andriod. Check out these detailed instructions on how to connect via SSH with an <a href="https://termius.com/documentation/connect-via-ssh-with-a-password">SSH Password</a> or <a href="https://termius.com/documentation/connect-via-ssh-with-an-ssh-key">SSH Key</a>.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>We do not recommend using Git Bash for this. Git Bash is an application for Microsoft Windows environments which provides an emulation layer for a Git command line experience. It does not have all the functionality one would usually need when accessing servers in this manner.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you are using a native terminal on MacOS or Unix, you could initiate a command line connection using:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> <span class="at">-i</span> /path/to/your-private-key.key user123@<span class="op">&lt;</span>vm-ip-address<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="console-connection-using-the-browser" class="level3">
<h3 class="anchored" data-anchor-id="console-connection-using-the-browser">Console connection using the browser</h3>
<p>Within your OpenStack web console, navigate to the <a href="https://stack.exeter.ac.uk/dashboard/project/instances/">instance list</a> and click on your instance in the list. In this example, we will click on the <em>keypair_only</em> instance.</p>
<p><img src="img/openstack-connect-10.png" class="img-fluid"></p>
<p>In the next window click on the <em>Console</em> tab. Here, you will be able to see the main GUI of your computer. If you used the cloud-init <a href="#option-2">Option 2</a> - then you will be able to login at this interface using the password you had used. If you used <a href="#option-1">Option 1</a> during the cloud-init stage, then you will not be able to login using this method as you would not be aware of the correct password to use. In this case, you would need to reset the user password (covered elsewhere) to be able to use the method described here.</p>
<p><img src="img/openstack-connect-11.png" class="img-fluid"></p>
</section>
<section id="graphical-connection-using-x2go" class="level3">
<h3 class="anchored" data-anchor-id="graphical-connection-using-x2go">Graphical connection using X2Go</h3>
<p>For some modules you will need a full graphical desktop connection. This is a bit more complicated to set up, but will give you a full graphical desktop environment to work on. For this we use <a href="https://wiki.x2go.org/doku.php">X2go</a></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
How to install X2Go
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://wiki.x2go.org/doku.php/doc:installation:x2goclient">See here for detailed instructions</a> on how to install X2Go client for your operating system. Note that you may need privilege escalation (a.k.a admin rights) on your machine to do this. If you have a University provided Windows laptop, you may also look for X2Go within the <strong>Company Portal</strong> for easy installation.</p>
<p>If you are on a University provided Mac running OSX, look for X2Go within the UoE <strong>Self Service app</strong> that has been pre-installed on your Mac device.</p>
</div>
</div>
<p>Once X2Go is installed, start the program from your desktop shortcut.</p>
<p><img src="img/openstack-connect-01.png" class="img-fluid"></p>
<p>Or look for it in your start menu</p>
<p><img src="img/openstack-connect-02.png" class="img-fluid">When the programme launches for the first time, you may get a message as below, it only affects some features you don’t need.</p>
<p><img src="img/openstack-connect-03.png" class="img-fluid"></p>
<p>N.B - on some versions of windows you might get a different message - select ‘Allow Access’ if you have administrative rights or else click ‘keep blocking’ or ‘cancel’.</p>
<p>You should now see the main screen</p>
<p><img src="img/openstack-connect-04.png" class="img-fluid"></p>
<p>Now you need to tell your computer where to connect to. On a new installation the Session dialog (image below) will load automatically and you can start filling it up as shown below. On an existing installation of X2Go, you will need to Click on the ‘new session’ icon to set up a new connection.</p>
<p><img src="img/openstack-connect-05.png" class="img-fluid"></p>
<p>Enter the information as highlighted above. Make sure you use the IP address you copied earlier and use an appropriate name. If you decide to use the <em>Key</em> Pair, then click the <em>Try auto login</em> checkbox as well. If not using a key Pair, you can omit those two fields.</p>
<p>Once this has been done we need to change the connection settings. If you are doing this on campus, you should select LAN here. If out of campus, please choose a connection speed based on your internet connection. Most modern fiber broadband services at home can be categorized as WAN.</p>
<p><img src="img/openstack-connect-06.png" class="img-fluid"></p>
<p>Now let’s adjust the display settings so you can work comfortably at the correct screen resolution. Select the ‘Input/Output’ tab at the top and change the display to use the <em>Use whole display</em> as shown below. You may want to select <em>Fullscreen</em> instead.</p>
<p><img src="img/openstack-connect-07.png" class="img-fluid"></p>
<p>In the Media tab, make sure that Enable sound support and Client side printer support are disabled (unless you need those options).</p>
<p><img src="img/openstack-connect-07b.png" class="img-fluid"></p>
<p>Once completed, click on OK. Your screen should now look like this:<br>
<img src="img/openstack-connect-08.png" class="img-fluid"></p>
<p>Click anywhere in the <strong>white</strong> area. The first time you connect to your instance (or if the IP address changes after a reboot) you will see a message like:</p>
<p><img src="img/openstack-connect-09.png" class="img-fluid"></p>
<p>Click Yes. If using a key-pair authentication, you will be connected automatically. If you have opted for password based authentication, then enter the password you chose when creating the crypt-sha512 hash.</p>
</section>
</section>
<section id="managing-your-openstack-instances" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Managing Your OpenStack Instances</h1>
<p>This section contains some instructions on how to manage you OpenStack instances.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you’re not working on the course please do be considerate and turn off your instance to avoid using unnecessary resource. If your instance is running, even if you are not doing anything on it, it will be using resource and may hinder others using the resources.</p>
</div>
</div>
<section id="find-your-instance" class="level3">
<h3 class="anchored" data-anchor-id="find-your-instance">Find your instance:</h3>
<p>Log onto the <a href="https://stack.exeter.ac.uk/dashboard/project/instances/">OpenStack console</a> and find your instance. Click on <em>Compute - Instances</em> and if you cannot find your instance easily, use the filter button.</p>
<p><img src="./img/manage_001.jpg" class="img-fluid"></p>
</section>
<section id="stopping-your-instance" class="level3">
<h3 class="anchored" data-anchor-id="stopping-your-instance">Stopping Your Instance:</h3>
<p>If you wish to keep your data, use the <em>Shut Off instance</em> option. In this state the data written to disk will be preserved, but the instance will be ‘<em>off</em>’ (this is the equivalent of turning off a computer).</p>
<p>Use the dropdown next to your instance and select <em>Shut Off Instance</em> (near the bottom)</p>
<p><img src="images/clipboard-3895278222.png" class="img-fluid">You will be asked to confirm - <strong>double check</strong> it is the instance you intend to shut down.</p>
</section>
<section id="rebuilding-your-instance" class="level3">
<h3 class="anchored" data-anchor-id="rebuilding-your-instance">Rebuilding Your Instance:</h3>
<p>In OpenStack, rebuilding an instance means recreating it from a fresh image, effectively reinstalling the operating system and losing any data on the instance’s root disk. This process preserves the instance’s UUID, attached volumes, and network settings, such as fixed and floating IP addresses. It’s a way to “reset” an instance to a clean state without needing to delete and recreate it entirely.</p>
<p>Use the dropdown next to your instance and select <em>Rebuild Instance</em> (near the bottom)</p>
<p><img src="images/clipboard-1820862628.png" class="img-fluid"></p>
<p>You will then be asked to choose an image that you want to <em>Rebuild</em> from. Select the correct image for your needs and press <em>Rebuild Instance</em>.</p>
<p><img src="images/clipboard-3037362299.png" class="img-fluid"></p>
</section>
<section id="restarting-your-instance" class="level3">
<h3 class="anchored" data-anchor-id="restarting-your-instance">Restarting Your Instance:</h3>
<p>If the status of your instance is <em>Shutoff</em> - click <em>Start</em> Instance.</p>
<p>Double check the IP address of your instance as it may change - you will need to use the new IP address to connect to you instance. In X2Go click on the drop down arrow to get the menu of options.<br>
<img src="./img/x2go-session-prefs-1.png" class="img-fluid"></p>
</section>
<section id="deleting-an-instance." class="level3">
<h3 class="anchored" data-anchor-id="deleting-an-instance.">Deleting an instance.</h3>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Note:</strong> this will destroy all work done to date.</p>
</div>
</div>
<p>When you’re completely finished with the workshop, click the drop-down menu next to your instance and select <em>Delete Instance</em>. It will ask you to confirm - You can then watch the status change from <em>Shutting down</em> to <em>Deleted</em>.</p>
<p><img src="images/clipboard-2155257801.png" class="img-fluid"></p>
</section>
</section>
<section id="specific-use-cases" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Specific Use Cases</h1>
<p>Here, we have configured a virtual machine that has an installation of RStudio Server (Open Source Edition) and it also has XRDP (a remote desktop for Ubuntu) installed on it. In this section, we will show you how to modify your <a href="#security-groups">Security Groups</a> to allow access to these applications from your laptop.</p>
<p>Go to the <em>Network</em> tab and then to the <em>Security Groups</em> pane within it. Click on <em>Manage Rules</em> on the far right-hand side.</p>
<p><img src="img/openstack-connect-12.png" class="img-fluid"></p>
<p>Click on <em>Add Rule</em> to create the new rules we need.</p>
<p><img src="img/openstack-connect-13.png" class="img-fluid"></p>
<section id="allowing-access-to-rstudio-server" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="allowing-access-to-rstudio-server"><span class="header-section-number">8.1</span> Allowing access to RStudio Server</h2>
<p>RStudio Server listens on tcp port 8787 by default and XRDP listens on tcp port 3389. First, let’s add a custom rule for RStudio as follows:</p>
<p><img src="img/openstack-connect-15.png" class="img-fluid"></p>
<p>Now, you can access your RStudio Server’s web interface at http://10.121.4.162:8787/ (substitute the IP address shown here with your own VM’s IP address).</p>
<p><img src="images/clipboard-3790874182.png" class="img-fluid"></p>
<p><img src="images/clipboard-184123163.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that the RStudio Server interface requires you to use a username and password combination. So, this example will only work if you chose <a href="#option-2">Option 2</a> in the <em>Cloud Config</em> section.</p>
</div>
</div>
</section>
<section id="allowing-access-to-remote-desktop-protocol" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="allowing-access-to-remote-desktop-protocol"><span class="header-section-number">8.2</span> Allowing access to Remote Desktop Protocol</h2>
<p>Now, we can add another rule for RDP. This is a well known service so we can select RDP from the drop down options and click <em>Add</em>. <img src="img/clipboard-1799424740.png" class="img-fluid"></p>
<p>Now, if you launch your OS specific <em>Remote Desktop Client</em> and configure it to connect to your VM as follows:</p>
<p><img src="img/rdp-setup.png" class="img-fluid"></p>
<p>Press connect, and when prompted with a warning that the identity of the remote computer cannot be verified, click yes to connect anyway.</p>
<p><img src="images/clipboard-662576167.png" class="img-fluid"></p>
<p>You will no see a remote desktop screen where you can proceed to enter the password you had used to create this <em>Instance.</em></p>
<p><img src="images/clipboard-3562638128.png" class="img-fluid"></p>
<p>After a brief wait, you will see the XUbuntu-Desktop in front of you. You may now proceed to interact with the <em>Instance</em> just like you would with a computer in front of you. When doing this for the first time, you may be presented with authentication / elevation messages (as shown below), or shown options to upgrade the operating system to the next distribution - address those prompts with care.</p>
<p><img src="images/clipboard-1893954535.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you don’t know what it is, ask Google and then consider accessing the Ask For Help Teams channel to ask for help!</p>
</div>
</div>
<p>Now, if you go back and look at the modified rules - they should look something like this:</p>
<p><img src="img/clipboard-3745716289.png" class="img-fluid"></p>
</section>
<section id="using-vscode-to-interact-with-this-instance" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="using-vscode-to-interact-with-this-instance"><span class="header-section-number">8.3</span> Using VSCode to interact with this <em>Instance</em></h2>
<p>First, follow <a href="https://code.visualstudio.com/docs/setup/setup-overview#_set-up-vs-code-for-your-platform">this guide to setup VS Code for your platform.</a> Once VS Code is installed, you can use the <strong>Visual Studio Code Remote - SSH</strong> extension to open a remote folder on any remote machine, virtual machine, or container with a running SSH server and take full advantage of VS Code’s feature set. Once connected to a server, you can interact with files and folders anywhere on the remote filesystem. <a href="https://code.visualstudio.com/docs/remote/ssh">See this guide to learn how to connect to this instance over SSH</a>.</p>
</section>
</section>
<section id="acknowledgements" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Acknowledgements</h1>
<p>The inaugural set of workshops has been funded by a Researcher Led Initiative grant to Dr.&nbsp;Tom Horton, in collaboration with Dr.&nbsp;M.D.&nbsp;Sharma and Dr.&nbsp;Stephen Lang at the University of Exeter (Penryn Campus).</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/exeter-data-analytics\.github\.io\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
<script>
  function loadGiscus() {
    // Function to get the theme based on body class
    const getTheme = () => {
      let baseTheme = document.getElementById('giscus-base-theme').value;
      let altTheme = document.getElementById('giscus-alt-theme').value;
      return document.body.classList.contains('quarto-dark') ? altTheme : baseTheme;
    };
    const script = document.createElement("script");
    script.src = "https://giscus.app/client.js";
    script.async = true;
    script.dataset.repo = "exeter-data-analytics/exeter-data-analytics.github.io";
    script.dataset.repoId = "R_kgDOJW1l0Q";
    script.dataset.category = "General";
    script.dataset.categoryId = "";
    script.dataset.mapping = "title";
    script.dataset.reactionsEnabled = "1";
    script.dataset.emitMetadata = "0";
    script.dataset.inputPosition = "top";
    script.dataset.theme = getTheme();
    script.dataset.lang = "en";
    script.crossOrigin = "anonymous";
    // Append the script to the desired div instead of at the end of the body
    document.getElementById("quarto-content").appendChild(script);
  }
  loadGiscus();
</script>
</div> <!-- /content -->




</body></html>