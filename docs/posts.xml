<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>ExeDataHub</title>
<link>https://exeter-data-analytics.github.io/posts.html</link>
<atom:link href="https://exeter-data-analytics.github.io/posts.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-1.2.475</generator>
<lastBuildDate>Thu, 20 Apr 2023 23:00:00 GMT</lastBuildDate>
<item>
  <title>intRos: Installing, R, RStudio, and Git</title>
  <dc:creator>Daniel Padfield</dc:creator>
  <link>https://exeter-data-analytics.github.io/posts/install_rstudio_git/index.html</link>
  <description><![CDATA[ 




<section id="outline" class="level1">
<h1>Outline</h1>
<p>R is one of the most popular programming language for statistical programming in ecology, evolution, and conservation. It is also the language taught in the University of Exeter’s undergraduate and masters courses within the Centre for Ecology and Conservation.</p>
<p>RStudio is probably the most popular IDE for people using R. An IDE is an integrated development environment, which allows users to combine multiple aspects of software development in one place to make it easier to use. For RStudio, that means you have different panes that contain the R Console, your script, a file explorer, a pane where plots appear, and much more.</p>
<p>Git is a version control system that allows you to track versions of your files. It is popular when programming to be able to keep a history of all the changes you have made to your work, and be able to retrieve old instances of your work if you have made a mistake later down the line.</p>
<p>This post gives some details on how to install R, RStudio, and git. This information is mainly aggregated from other sources (see acknowledgements below), but there is some specific advice for Windows users for University of Exeter staff and students.</p>
</section>
<section id="prerequisites" class="level1">
<h1>Prerequisites</h1>
<ul>
<li>Be willing to endure some pain when installing things.</li>
</ul>
</section>
<section id="learning-objectives" class="level1">
<h1>Learning objectives</h1>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Learning objectives
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>This introduction should allow you to:</strong></p>
<ul>
<li>install R</li>
<li>install RStudio</li>
<li>manage your R, RStudio, and package installation</li>
<li>install git</li>
</ul>
</div>
</div>
</section>
<section id="installing-r" class="level1">
<h1>Installing R</h1>
<p>R can be installed from the Comprehensive R Archive Network (CRAN) <a href="https://www.stats.bris.ac.uk/R/">here</a>.</p>
<section id="for-mac-users" class="level2">
<h2 class="anchored" data-anchor-id="for-mac-users">For Mac Users</h2>
<p>Mac users should click the “Download R for macOS” link in the “Download and Install R” section. Click on the link for the latest version of R and click on the “Download R-[version].pkg” link to download the installer package. Open the downloaded file and follow the installation instructions. You can launch R by clicking the R icon on your Launchpad or in your Applications folder of your Finder, but we recommend using RStudio to code in R because it makes programming in R a much easier and more pleasant experience.</p>
</section>
<section id="for-windows-users" class="level2">
<h2 class="anchored" data-anchor-id="for-windows-users">For Windows Users</h2>
<p>Windows users should click the “Download R for Windows” link in the “Download and Install R” section. Click on the “base” directory and click on the link for the latest version of R. Then click on the “Download R[version] for Windows” link, open the downloaded file and follow the installation instructions. You can launch R by double-clicking the R icon on your Desktop or in your start menu, but we recommend using RStudio to code in R because it makes programming in R a much easier and more pleasant experience.</p>
</section>
</section>
<section id="installing-rstudio" class="level1">
<h1>Installing RStudio</h1>
<p>RStudio can be installed for free from the Posit (the company that was formerly known called RStudio) website <a href="https://posit.co/download/rstudio-desktop/">here</a>. RStudio is available for Windows, MacOS, and Linux. Just click the “Download RStudio” button and follow the simple instructions. Once you’ve installed RStudio, you can open it like any other program on your computer. <strong>Before you install RStudio, make sure you have installed R.</strong></p>
<section id="some-general-tips-for-global-options-of-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="some-general-tips-for-global-options-of-rstudio">Some general tips for Global Options of RStudio</h2>
<p>When setting up RStudio, there are a bunch of things you can change to configure your RStudio to how you like it. Some of these are likely personal, but we have some settings we like to use. These are settings you can change by clicking Tools -&gt; Global Options.</p>
<ol type="1">
<li>Unclick “Restore .RData into workspace at startup”. This means that each time you start a new RStudio instance, your environment starts clean and you can be confident that any results you have, or weird R behaviour, is not due to any previous code or session.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/install_rstudio_git/restore_rdata.png" class="img-fluid figure-img" style="width:60.0%"></p>
<p></p><figcaption class="figure-caption">Do not restore Rdata</figcaption><p></p>
</figure>
</div>
<ol start="2" type="1">
<li>Unclick “Restore most recently opened project at startup”. This means that when you start a new RStudio, it will open an RStudio not associated with a project. This is more of a personal preference of mine as more often than not I have multiple RStudio instances open not associated with the same work, and I got tired of closing the project of new RStudio instances.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/install_rstudio_git/restore_project.png" class="img-fluid figure-img" style="width:60.0%"></p>
<p></p><figcaption class="figure-caption">Do not restore most recent project</figcaption><p></p>
</figure>
</div>
<ol start="3" type="1">
<li>In the “Code” tab, tick “Soft-wrap R source files”. This means that instead of having long lines of code that go off of your source pane and require you to move from left-to-right to view them, the source pane instead “soft-wraps” them into a new line, while preserving the fact that they are, in fact, a single line of code.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/install_rstudio_git/soft_wrap.png" class="img-fluid figure-img" style="width:60.0%"></p>
<p></p><figcaption class="figure-caption">Turn on Soft wrap</figcaption><p></p>
</figure>
</div>
<ol start="4" type="1">
<li>In the “Code -&gt; Display” tab, unclick “Show Margin” which will get rid of the annoying line that can be present in the Source pane sometimes.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/install_rstudio_git/show_margin.png" class="img-fluid figure-img" style="width:60.0%"></p>
<p></p><figcaption class="figure-caption">Turn off Show margin</figcaption><p></p>
</figure>
</div>
<ol start="5" type="1">
<li>I leave the default colours on for RStudio, but you can change to black background (and loads of other alternatives) in the “Appearance” tab.</li>
</ol>
</section>
<section id="managing-where-your-r-packages-install" class="level2">
<h2 class="anchored" data-anchor-id="managing-where-your-r-packages-install">Managing where your R packages install</h2>
<p>Over many years, I have helped a fair few people at the University try and work out how to install R packages on their University computers. This has mainly been on Windows machines, and is most likely due to the lack of read/write access wherever R by default chooses to install packages.</p>
<p>Consequently, it might be good for you to choose a new location on your computer where your R packages will install. And if you cannot install R packages at the moment then we are here to help! You can learn how to do change the default location your R packages install into by watching <a href="https://rfortherestofus.com/2021/09/how-to-set-your-default-package-install-location-in-r/">this video</a>, but we will whizz through the process here too.</p>
<ol type="1">
<li><p>Check where R is installing packages by typing <strong>.libPaths()</strong> into your R console.</p></li>
<li><p>Create a new folder which you would like to install packages, somewhere where you <strong>DEFINITELY</strong> have read/write access (e.g.&nbsp;“~/Desktop/r_packages”)</p></li>
<li><p>We can then change <strong>.libPaths()</strong> for this R session.</p></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/install_rstudio_git/change_libpaths.png" class="img-fluid figure-img" style="width:60.0%"></p>
<p></p><figcaption class="figure-caption">Change where you R packages install in an individual session</figcaption><p></p>
</figure>
</div>
<ol start="4" type="1">
<li><p>However, when we start a new R session, this change will be lost. To change it by default for R, we need to change our .Renviron file, which allows us to change variables that R looks for every time it starts. To easily manipulate this file, we will first install the R package <strong>usethis</strong> using <strong>install.packages(usethis)</strong>. It should install into the new directory you have just created, for me it installed into “~/Desktop/r_packages”.</p></li>
<li><p>Run <strong>usethis::edit_r_environ()</strong> in your Console and it should open your .Renviron file in your source pane. From here, add <strong>R_LIBS_USER=“~/Desktop/r_packages”</strong> to it (obviously change the folder name to the folder you have created), click Save, and close the file.</p></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/install_rstudio_git/edit_r_environ.png" class="img-fluid figure-img" style="width:60.0%"></p>
<p></p><figcaption class="figure-caption">Run usethis::edit_r_environ</figcaption><p></p>
</figure>
</div>
<ol start="6" type="1">
<li>Now when you start a new R instance, your chosen folder should be present when you run <strong>.libPaths()</strong> and you should not have problems installing R packages anymore!</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/install_rstudio_git/libpaths2.png" class="img-fluid figure-img" style="width:60.0%"></p>
<p></p><figcaption class="figure-caption">.libPaths() changes by default</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="installing-git" class="level1">
<h1>Installing git</h1>
<p>To check if Git is installed on a Windows or Mac machine, follow these steps:</p>
<p>For Windows:</p>
<ol type="1">
<li>Open the Command Prompt by pressing the “Windows Key + R” and typing “cmd” in the “Run” dialog box, or open “Git Bash” (or use the Terminal tab of your RStudio).</li>
<li>Type “git –version” and press Enter.</li>
<li>If git is installed, the version number of git will be displayed in the Command Prompt.</li>
</ol>
<p>For Mac:</p>
<ol type="1">
<li>Open the Terminal application by finding it on your Launchpad or Applications folder in your Finder (or in the Terminal tab of your RStudio).</li>
<li>Type “git –version” and press Enter.</li>
<li>If git is installed, the version number of git will be displayed in the Terminal window.</li>
</ol>
<p>Even if git is installed, it is probably a good idea to update to the latest version. git has very good backwards compatibility so it is very unlikely that updating will break anything.</p>
<section id="for-mac-users-1" class="level2">
<h2 class="anchored" data-anchor-id="for-mac-users-1">For Mac Users</h2>
<p>Git can be installed on Mac from some of the options on the git <a href="https://git-scm.com/download/mac">website</a>. Another alternative is <a href="https://desktop.github.com/">GitHub Desktop</a>, which will install the latest version of Git with itself if you do not already have it.</p>
</section>
<section id="for-windows-users-1" class="level2">
<h2 class="anchored" data-anchor-id="for-windows-users-1">For Windows Users</h2>
<p>Git can be installed from <a href="https://gitforwindows.org/">gitforwindows</a>, but if you install <a href="https://desktop.github.com/">GitHub Desktop</a>, the latest version of Git will be installed if you do not already have it. With GitHub Desktop, you get a command line version of Git with a robust GUI.</p>
</section>
<section id="make-a-github-profile" class="level2">
<h2 class="anchored" data-anchor-id="make-a-github-profile">Make a GitHub profile</h2>
<p>Git is version control on your local machine, to share code with other you should create a GitHub (or GitLab) profile. Information on setting up a GitHub account can be found <a href="https://docs.github.com/en/get-started/onboarding/getting-started-with-your-github-account">here</a>.</p>
</section>
<section id="configure-github-with-local-git-and-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="configure-github-with-local-git-and-rstudio">Configure GitHub with local git and RStudio</h2>
<p>Now we have git, R, and RStudio installed, and an RStudio profile, we need to make sure they can all talk each other, and that you can communicate with your GitHub profile from your local machine. An extensive walkthrough is available <a href="https://happygitwithr.com/connect-intro.html">here</a>, but we will cover the main steps.</p>
<p>First, we need to create an access token so that GitHub can securely link your local computer to GitHub. To do this go to https://github.com/settings/tokens and create an access token. For the scopes, I ticked most that I thought would be useful and understood, which were <strong>gist</strong>, <strong>repo</strong>, <strong>user</strong>, <strong>workflow</strong>. Make sure you name it something useful like “R:GitHubPAT” so that is makes sense if you ever need to make a new token.</p>
<p>Once this code is created, save it to your clipboard or in a text editor while we are storing it in your RStudio. Once you close the webpage you will never see this token again, so make sure you make a note of it! Then going forwards, treat this access token as you would a password. For some of you that might mean using a password manager, and for some of you that might mean a book, your hand, or post it notes on your computer screen.</p>
<p>We will use the R package <strong>gitcreds</strong> to associate your GitHub PAT with RStudio. First install <strong>gitcreds</strong> using <strong>install.packages(‘gitcreds’)</strong>. If you want a way to be able to install and load R packages from CRAN, GitHub, and Bioconductor in a simpler way without calls to both <strong>install.packages()</strong> and <strong>library()</strong>, then I recommend looking at <a href="https://github.com/DesiQuintans/librarian"><strong>librarian</strong></a>!</p>
<p>Next run <strong>gitcreds::gitcreds_set()</strong> and follow the prompts. Specifically make sure you copy in your GitHub PAT!</p>
<p><img src="https://exeter-data-analytics.github.io/posts/install_rstudio_git/gitcreds_set.png" class="img-fluid" style="width:60.0%" alt="gitcreds_set()"> Once you have set this, you can check it has stored properly using <strong>gitcreds::gitcreds::get()</strong>.</p>
<p>This should mean you are ready to roll (i.e.&nbsp;Git and GitHub like a boss), but if you are getting stuck some common troubleshoots can be found <a href="https://happygitwithr.com/https-pat.html#pat-troubleshooting">here</a></p>
<p>One thing you can check is that RStudo knows where your git executable is. In Tools -&gt; GLobal Options, you can check where git is stored and being accessed from.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/install_rstudio_git/check_git_rstudio.png" class="img-fluid figure-img" style="width:60.0%"></p>
<p></p><figcaption class="figure-caption">Check where RStudio is looking for git</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="summary" class="level1">
<h1>Summary</h1>
<p>After this guide, you should have installed R, RStudio, and git on your machine, and also know a little more about how to check where your R packages are installing and some handy RStudio options.</p>
<section id="additional-resources" class="level3">
<h3 class="anchored" data-anchor-id="additional-resources">Additional Resources</h3>
<ul>
<li>This <a href="https://happygitwithr.com/">online book</a> about using R and RStudio and git is incredible.</li>
</ul>
</section>
<section id="acknowledgements" class="level3">
<h3 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h3>
<p>We did not create this content alone! Inspiration, tips, and resources have been borrowed from multiple sources.</p>
<ul>
<li>We took inspiration from this <a href="https://www.r-bloggers.com/2019/05/my-rstudio-configuration/">blog post</a> about someone’s RStudio configuration.</li>
<li>We watched <a href="https://rfortherestofus.com/2021/09/how-to-set-your-default-package-install-location-in-r/">this video</a> on how to change the location for installing R packages.</li>
<li>We enjoyed <a href="https://community.rstudio.com/t/should-i-update-all-my-r-packages-frequently-yes-no-why/5856/6">this thread</a> on whether we should update our R packages regularly. In conclusion, yes probably.</li>
<li>Some of the content was created using ChatGPT.</li>
</ul>


</section>
</section>

 ]]></description>
  <category>R</category>
  <category>RStudio</category>
  <category>git</category>
  <guid>https://exeter-data-analytics.github.io/posts/install_rstudio_git/index.html</guid>
  <pubDate>Thu, 20 Apr 2023 23:00:00 GMT</pubDate>
  <media:content url="https://exeter-data-analytics.github.io/posts/install_rstudio_git/restore_rdata.png" medium="image" type="image/png" height="151" width="144"/>
</item>
<item>
  <title>intRos: Publication ready plots using ggplot2</title>
  <dc:creator>Daniel Padfield</dc:creator>
  <link>https://exeter-data-analytics.github.io/posts/intro_to_ggplot2/index.html</link>
  <description><![CDATA[ 




<section id="outline" class="level1">
<h1>Outline</h1>
<p>I love making graphs! To explore data, to plot model results, just for the fun of making plots. I imagine we have all spent a huge amount of time making our plots ready for publication. Here we have a quick walkthrough of using <strong>ggplot2</strong> to create graphs for publication, and a few tips and tricks we have learned along the way. <em>If you have a favourite ggplot2 trick or tip then we would love for you to get in contact with us and for you add it to this walkthrough. Or if you’re feeling adventurous, clone the <a href="https://github.com/exeter-data-analytics/intRos">GitHub repo</a>, add in your tip, re-render this quarto post, commit and push the changes, and start a Pull Request!</em></p>
<p><strong>ggplot2</strong> is a popular data visualisation package in R that allows users to create high-quality and customisable graphics for data exploration, scientific publications, and presentations. Developed by Hadley Wickham, <strong>ggplot2</strong> is built on the principles of the Grammar of Graphics, which defines a set of rules for constructing and interpreting visualisations. With <strong>ggplot2</strong>, users can easily create a wide range of plots with advanced features such as facets, themes, and labels. Whether you are at the beginning of your science journey, or an old and grumpy PI, <strong>ggplot2</strong> provides a powerful and flexible tool for visualising data and gaining insights from it.</p>
<p>Making a <strong>ggplot2</strong> is like writing and following a recipe. You start with the first instructions (a call to <strong>ggplot()</strong>), the next instruction (like the next item of the recipe) is signalled using a <code>+</code>, a new line, and new instructions are added sequentially. <strong>ggplot2</strong> works in a sequential fashion, later instructions add to what is already there, and sometimes counteract or override what previous instructions.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/intro_to_ggplot2/Slide1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Making a plot using <strong>ggplot2</strong> works much like a recipe</figcaption><p></p>
</figure>
</div>
</section>
<section id="prerequisites" class="level1">
<h1>Prerequisites</h1>
<ul>
<li>Have R installed</li>
<li>Have the <strong>tidyverse</strong> package installed</li>
<li>Hopefully have a plot you want to make using <strong>ggplot2</strong> or have some aesthetics you would like to change on a current plot.</li>
</ul>
</section>
<section id="learning-objectives" class="level1">
<h1>Learning objectives</h1>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Learning objectives
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>This introduction should allow you to:</strong></p>
<ul>
<li>Have a basic understanding of the way in which <strong>ggplot2</strong> “works” (i.e.&nbsp;the grammar of graphics)</li>
<li>Understand the format data needs to be in to be used in <strong>ggplot2</strong></li>
<li>Make pubication-ready plots using <strong>ggplot2</strong></li>
<li>Know where to learn more about <strong>ggplot2</strong></li>
</ul>
</div>
</div>
</section>
<section id="making-plots-with-ggplot2" class="level1">
<h1>Making plots with ggplot2</h1>
<p>This walkthrough will lean heavy on tools from the <strong>tidyverse</strong> for data wrangling, and the <strong>palmerpenguins</strong> package for the example data. The first thing we will do is load in the necessary packages and load in the dataset we will use to create our tables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;"># load in required packages</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">library</span>(palmerpenguins)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;">library</span>(MetBrewer)</span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;">library</span>(patchwork)</span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;"># load in data</span></span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;">data</span>(<span class="st" style="color: #20794D;">"penguins"</span>)</span>
<span id="cb1-9">d <span class="ot" style="color: #003B4F;">&lt;-</span> penguins</span>
<span id="cb1-10"></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;"># have a look at the data</span></span>
<span id="cb1-12"><span class="fu" style="color: #4758AB;">glimpse</span>(d)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 8
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…</code></pre>
</div>
</div>
<p>This dataset contain data for 344 penguins, consisting of three species of penguins, collected from 3 islands in the Palmer Archipelago, Antarctica.</p>
<section id="preparing-your-dataset-for-ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="preparing-your-dataset-for-ggplot2">Preparing your dataset for ggplot2</h2>
<p>For <strong>ggplot2</strong>, your data wants to be organised in long format, as opposed to wide.</p>
</section>
<section id="make-a-first-plot-using-ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="make-a-first-plot-using-ggplot2">Make a first plot using ggplot2</h2>
<p>We will make a boxplot of how bill length changes between different species of penguin and add the raw points over the top. After making an initial plot call using <strong>ggplot()</strong>, different types of plot are specified using a <strong>geom_</strong> function (e.g.&nbsp;<strong>geom_boxplot()</strong> for boxplots, <strong>geom_point()</strong> for points, <strong>geom_line()</strong> for a line graph). In each layer, the <strong>aes()</strong> function is used to tell <strong>ggplot2</strong> which arguments depend on aspects of the dataset (e.g.&nbsp;col = species). Arguments set outside of <strong>aes()</strong> do not rely on the dataset (e.g.&nbsp;size = 3, col = ‘black’).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;"># make first box plot with raw points</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;">ggplot</span>(d, <span class="fu" style="color: #4758AB;">aes</span>(species, bill_length_mm, <span class="at" style="color: #657422;">col =</span> species)) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># add first empty plot layer</span></span>
<span id="cb3-3">  <span class="fu" style="color: #4758AB;">geom_boxplot</span>(<span class="at" style="color: #657422;">outlier.shape =</span> <span class="cn" style="color: #8f5902;">NA</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># add boxplot, do not plot the outliers</span></span>
<span id="cb3-4">  <span class="fu" style="color: #4758AB;">geom_jitter</span>(<span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.2</span>) <span class="co" style="color: #5E5E5E;"># add jittered raw points</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/intro_to_ggplot2/index_files/figure-html/first_plot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Ok this looks nice. Here I put the <strong>aes()</strong> commands inside the original call to <strong>ggplot()</strong> as then those arguments are passed to all other layers (unless overridden by another <strong>aes()</strong>). This looks quite nice, but we can change a bunch of other things to make it look nicer.</p>
</section>
<section id="adding-extra-layers-to-ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="adding-extra-layers-to-ggplot2">Adding extra layers to ggplot2</h2>
<p>There are a bunch of things I do as standard when I am making a plot (and a boxplot in particular):</p>
<ul>
<li>Change the axis labels</li>
<li>Remove the legend if not needed</li>
<li>Change the axis limits</li>
<li>Change the theme and the text size</li>
<li>I dislike the default box plot so I colour the whole thing and then add a median bar in white (see below)</li>
</ul>
<p>The important thing is to create your own style. To do what you think looks best, but all the options are documented nicely on their <a href="https://ggplot2.tidyverse.org/">website</a>. There are many more detailed resources around, so instead here we will document common things we do.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;"># make next box plot with raw points</span></span>
<span id="cb4-2">p1 <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ggplot</span>(d, <span class="fu" style="color: #4758AB;">aes</span>(species, bill_length_mm, <span class="at" style="color: #657422;">col =</span> species, <span class="at" style="color: #657422;">fill =</span> species)) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># add first empty plot layer</span></span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;">geom_boxplot</span>(<span class="at" style="color: #657422;">outlier.shape =</span> <span class="cn" style="color: #8f5902;">NA</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># add boxplot, do not plot the outliers</span></span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;">stat_summary</span>(<span class="at" style="color: #657422;">geom =</span> <span class="st" style="color: #20794D;">"crossbar"</span>, <span class="at" style="color: #657422;">fatten =</span> <span class="dv" style="color: #AD0000;">2</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"white"</span>, <span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.4</span>, </span>
<span id="cb4-5">               <span class="at" style="color: #657422;">fun.data =</span> <span class="cf" style="color: #003B4F;">function</span>(x){<span class="fu" style="color: #4758AB;">return</span>(<span class="fu" style="color: #4758AB;">c</span>(<span class="at" style="color: #657422;">y =</span> stats<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">median</span>(x), <span class="at" style="color: #657422;">ymin =</span> stats<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">median</span>(x), <span class="at" style="color: #657422;">ymax =</span> stats<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">median</span>(x)))}) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># add median line to the boxplots</span></span>
<span id="cb4-6">  <span class="fu" style="color: #4758AB;">geom_jitter</span>(<span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.2</span>, <span class="at" style="color: #657422;">shape =</span> <span class="dv" style="color: #AD0000;">21</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">'white'</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># add jittered raw points</span></span>
<span id="cb4-7">  <span class="fu" style="color: #4758AB;">theme_bw</span>(<span class="at" style="color: #657422;">base_size =</span> <span class="dv" style="color: #AD0000;">14</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># change theme to the one I like (others are available)</span></span>
<span id="cb4-8">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">'Species'</span>,</span>
<span id="cb4-9">       <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">'Bill length (mm)'</span>,</span>
<span id="cb4-10">       <span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">'Do different penguin species have different bill lengths?'</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># change labels</span></span>
<span id="cb4-11">  <span class="fu" style="color: #4758AB;">ylim</span>(<span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">30</span>,<span class="dv" style="color: #AD0000;">65</span>)) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># change y limits</span></span>
<span id="cb4-12">  <span class="fu" style="color: #4758AB;">guides</span>(<span class="at" style="color: #657422;">col =</span> <span class="st" style="color: #20794D;">'none'</span>,</span>
<span id="cb4-13">         <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">'none'</span>) <span class="co" style="color: #5E5E5E;"># turn off legend</span></span>
<span id="cb4-14"></span>
<span id="cb4-15">p1</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/intro_to_ggplot2/index_files/figure-html/second_plot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>And there - with relatively few lines of code - we have a plot that is ready for inserting into a publication. This can be easily saved out using <strong>ggsave()</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;"># save out plot using ggsave</span></span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;">ggsave</span>(<span class="st" style="color: #20794D;">'plot_one.png'</span>, p1, <span class="at" style="color: #657422;">width =</span> <span class="dv" style="color: #AD0000;">5</span>, <span class="at" style="color: #657422;">height =</span> <span class="dv" style="color: #AD0000;">7</span>)</span></code></pre></div>
</div>
</section>
<section id="our-favourite-tips-and-tricks-when-making-plots" class="level2">
<h2 class="anchored" data-anchor-id="our-favourite-tips-and-tricks-when-making-plots">Our favourite tips and tricks when making plots</h2>
<p>I have a set of rules I follow when making plots with <strong>ggplot2</strong>. Some may be different to yours but they might have some use:</p>
<ul>
<li>Generally I make my datasets <strong>BEFORE</strong> they go into <strong>ggplot2</strong>. This includes checking for <code>NA</code> and <code>Inf</code> values as these are super important to know about when visualising and analysing your data!</li>
<li><ul>
<li>Plot the raw data whenever possible.</li>
</ul></li>
<li>Layers work iteratively (later layers go on top of earlier layers) so make sure layers you want to be in the background (e.g.&nbsp;boxplot) are before layers you want to overlay (e.g.&nbsp;the raw data)</li>
<li>Only use <strong>stat_smooth()</strong> for exploring datasets. When plotting model predictions and confidence intervals, create a dataframe for them and then feed that into <strong>ggplot2</strong>.</li>
</ul>
<section id="convert-text-size-in-geom_label-or-geom_text-to-pts-used-for-labels" class="level3">
<h3 class="anchored" data-anchor-id="convert-text-size-in-geom_label-or-geom_text-to-pts-used-for-labels">Convert text size in geom_label() or geom_text() to pts used for labels</h3>
<p>Lets say we wanted to add text to the plot. For example, in the plot above maybe we want to add the total number of penguins sampled for each species. By default <strong>geom_text()</strong> and <strong>geom_label()</strong> use a size guide that is different to the font size set for the axis and tick labels. However, Andrew Heiss has written a function to convert between those so we can easily define the font size in the regular way.</p>
<p>We will use functions from the <strong>tidyverse</strong> to create a data frame with the total number of penguins sampled and the max bill length for each penguin. Creating a data frame with the x and y coordinates of where I want the text to go on the plot, and a column for the label, is how I approach adding text labels to an existing <strong>ggplot</strong>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;"># define function for pts</span></span>
<span id="cb6-2">pts <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(x){</span>
<span id="cb6-3">    <span class="fu" style="color: #4758AB;">as.numeric</span>(grid<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">convertX</span>(grid<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">unit</span>(x, <span class="st" style="color: #20794D;">"points"</span>), <span class="st" style="color: #20794D;">"mm"</span>))</span>
<span id="cb6-4">  }</span>
<span id="cb6-5"></span>
<span id="cb6-6"><span class="co" style="color: #5E5E5E;"># calculate n for putting each species</span></span>
<span id="cb6-7"><span class="co" style="color: #5E5E5E;"># remove NAs because they are not in the plot</span></span>
<span id="cb6-8">d_n <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">filter</span>(d, <span class="sc" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;">is.na</span>(bill_length_mm)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb6-9">  <span class="fu" style="color: #4758AB;">group_by</span>(species) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb6-10">  <span class="fu" style="color: #4758AB;">summarise</span>(<span class="at" style="color: #657422;">n =</span> <span class="fu" style="color: #4758AB;">n</span>(),</span>
<span id="cb6-11">            <span class="at" style="color: #657422;">max_bill_length =</span> <span class="fu" style="color: #4758AB;">max</span>(bill_length_mm)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb6-12">  <span class="fu" style="color: #4758AB;">ungroup</span>()</span>
<span id="cb6-13"></span>
<span id="cb6-14"><span class="co" style="color: #5E5E5E;"># make plot with text</span></span>
<span id="cb6-15"><span class="co" style="color: #5E5E5E;"># make next box plot with raw points</span></span>
<span id="cb6-16">p1 <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-17">  <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> species, <span class="at" style="color: #657422;">y =</span> max_bill_length <span class="sc" style="color: #5E5E5E;">+</span> <span class="dv" style="color: #AD0000;">5</span>, <span class="at" style="color: #657422;">label =</span> <span class="fu" style="color: #4758AB;">paste</span>(<span class="st" style="color: #20794D;">'n = '</span>, n, <span class="at" style="color: #657422;">sep =</span> <span class="st" style="color: #20794D;">''</span>)), d_n, <span class="at" style="color: #657422;">size =</span> <span class="fu" style="color: #4758AB;">pts</span>(<span class="dv" style="color: #AD0000;">12</span>), <span class="at" style="color: #657422;">col =</span> <span class="st" style="color: #20794D;">'black'</span>) <span class="co" style="color: #5E5E5E;"># add text label</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/intro_to_ggplot2/index_files/figure-html/example_geom_text-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="soft-wrap-or-stagger-text-labels-to-stop-them-overlapping" class="level3">
<h3 class="anchored" data-anchor-id="soft-wrap-or-stagger-text-labels-to-stop-them-overlapping">Soft wrap or stagger text labels to stop them overlapping</h3>
<p>Ok these two are quite recent finds for me, and I absolutely love them. Sometimes your x labels might be really long, and the text can overlap with each other. I used to manually add new lines into my text by inserting <code>\n</code> where I wanted new text to me. But now two approaches exist that can automatically improve spacing between labels on the x axis. These are <strong>scales::label_wrap</strong> which can automatically create new lines for long axis labels and <strong>guide_axis()</strong> which can stagger axis labels to prevent overlapping.</p>
<p>We will demonstrate them both below, by adding the Latin names for each penguin species to the dataset. We will add them in using <strong>case_when()</strong> and then show both plots next to each other using <strong>patchwork</strong> which makes it really easy to combine individual plots. For free you also get code to italicise the axis labels as they are latin names!</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">d <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">mutate</span>(d, <span class="at" style="color: #657422;">latin_name =</span> <span class="fu" style="color: #4758AB;">case_when</span>(species <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Gentoo"</span> <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"Pygoscelis papua"</span>,</span>
<span id="cb7-2">                                      species <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Chinstrap"</span> <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"Pygoscelis antarcticus"</span>,</span>
<span id="cb7-3">                                      species <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Adelie"</span> <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"Pygoscelis adeliae"</span>))</span>
<span id="cb7-4"></span>
<span id="cb7-5"><span class="co" style="color: #5E5E5E;"># first to softwrap the text</span></span>
<span id="cb7-6">p2 <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ggplot</span>(d, <span class="fu" style="color: #4758AB;">aes</span>(latin_name, bill_length_mm, <span class="at" style="color: #657422;">col =</span> species, <span class="at" style="color: #657422;">fill =</span> species)) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># add first empty plot layer</span></span>
<span id="cb7-7">  <span class="fu" style="color: #4758AB;">geom_boxplot</span>(<span class="at" style="color: #657422;">outlier.shape =</span> <span class="cn" style="color: #8f5902;">NA</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># add boxplot, do not plot the outliers</span></span>
<span id="cb7-8">  <span class="fu" style="color: #4758AB;">stat_summary</span>(<span class="at" style="color: #657422;">geom =</span> <span class="st" style="color: #20794D;">"crossbar"</span>, <span class="at" style="color: #657422;">fatten =</span> <span class="dv" style="color: #AD0000;">2</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"white"</span>, <span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.4</span>, </span>
<span id="cb7-9">               <span class="at" style="color: #657422;">fun.data =</span> <span class="cf" style="color: #003B4F;">function</span>(x){<span class="fu" style="color: #4758AB;">return</span>(<span class="fu" style="color: #4758AB;">c</span>(<span class="at" style="color: #657422;">y =</span> stats<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">median</span>(x), <span class="at" style="color: #657422;">ymin =</span> stats<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">median</span>(x), <span class="at" style="color: #657422;">ymax =</span> stats<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">median</span>(x)))}) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># add median line to the boxplots</span></span>
<span id="cb7-10">  <span class="fu" style="color: #4758AB;">geom_jitter</span>(<span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.2</span>, <span class="at" style="color: #657422;">shape =</span> <span class="dv" style="color: #AD0000;">21</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">'white'</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># add jittered raw points</span></span>
<span id="cb7-11">  <span class="fu" style="color: #4758AB;">theme_bw</span>(<span class="at" style="color: #657422;">base_size =</span> <span class="dv" style="color: #AD0000;">14</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># change theme to the one I like (others are available)</span></span>
<span id="cb7-12">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">'Species'</span>,</span>
<span id="cb7-13">       <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">'Bill length (mm)'</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># change labels</span></span>
<span id="cb7-14">  <span class="fu" style="color: #4758AB;">ylim</span>(<span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">30</span>,<span class="dv" style="color: #AD0000;">65</span>)) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># change y limits</span></span>
<span id="cb7-15">  <span class="fu" style="color: #4758AB;">guides</span>(<span class="at" style="color: #657422;">col =</span> <span class="st" style="color: #20794D;">'none'</span>,</span>
<span id="cb7-16">         <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">'none'</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># turn off legend</span></span>
<span id="cb7-17">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">axis.text.x =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">face =</span> <span class="st" style="color: #20794D;">"italic"</span>)) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># italicise x axis labels</span></span>
<span id="cb7-18">  <span class="fu" style="color: #4758AB;">scale_x_discrete</span>(<span class="at" style="color: #657422;">labels =</span> scales<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">label_wrap</span>(<span class="dv" style="color: #AD0000;">10</span>)) <span class="co" style="color: #5E5E5E;"># soft wrap labels</span></span>
<span id="cb7-19"></span>
<span id="cb7-20">p3 <span class="ot" style="color: #003B4F;">&lt;-</span> p2 <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb7-21">  <span class="fu" style="color: #4758AB;">scale_x_discrete</span>(<span class="at" style="color: #657422;">guide =</span> <span class="fu" style="color: #4758AB;">guide_axis</span>(<span class="at" style="color: #657422;">n.dodge =</span> <span class="dv" style="color: #AD0000;">2</span>)) <span class="co" style="color: #5E5E5E;"># stagger axis labels</span></span>
<span id="cb7-22"></span>
<span id="cb7-23">p2 <span class="sc" style="color: #5E5E5E;">+</span> p3</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/intro_to_ggplot2/index_files/figure-html/plot_softwrap-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>Either of these look great, but I think <strong>scales::label_wrap()</strong> is my favourite. So simple and so effective!</p>
</section>
<section id="automatically-label-facets-with-letters" class="level3">
<h3 class="anchored" data-anchor-id="automatically-label-facets-with-letters">Automatically label facets with letters</h3>
<p>One thing I often do is create faceted plots where each plot represents a different treatment or subset of the data. This is really easy to do with <strong>ggplot2</strong> using <strong>facet_wrap()</strong>. However, the default facets are poorly labelled, are not numbered (generally with a, b, c for publications), and have a grey fill colour.</p>
<p>However, these are all issues we can solve to create publication-ready facet labels. We will demonstrate this by plotting a different trait on each facet (bill length, bill depth, flipper length, body mass). We will create the long data using <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html"><strong>pivot_longer()</strong></a> and use <strong>case_when()</strong> to make sure the labels on each facet are formatted correctly (i.e.&nbsp;spaces instead of underscores.</p>
<p>We can write a function to automatically label each facet, and change theme elements to align text and change the strip background colour.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">long_format <span class="ot" style="color: #003B4F;">&lt;-</span> d <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">id =</span> <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="fu" style="color: #4758AB;">n</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># create column to id each individual penguin</span></span>
<span id="cb8-3">  <span class="fu" style="color: #4758AB;">pivot_longer</span>(., <span class="at" style="color: #657422;">cols =</span> <span class="fu" style="color: #4758AB;">c</span>(bill_length_mm<span class="sc" style="color: #5E5E5E;">:</span>body_mass_g), <span class="at" style="color: #657422;">names_to =</span> <span class="st" style="color: #20794D;">'trait'</span>, <span class="at" style="color: #657422;">values_to =</span> <span class="st" style="color: #20794D;">'value'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># go from wide to long format for the traits</span></span>
<span id="cb8-4">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">facet_label =</span> <span class="fu" style="color: #4758AB;">case_when</span>(trait <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">'bill_length_mm'</span> <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"Bill Length (mm)"</span>,</span>
<span id="cb8-5">                                 trait <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"bill_depth_mm"</span> <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"Bill Depth (mm)"</span>,</span>
<span id="cb8-6">                                 trait <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"body_mass_g"</span> <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"Body Mass (g)"</span>,</span>
<span id="cb8-7">                                 trait <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"flipper_length_mm"</span> <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"Flipper Length (mm)"</span>))</span>
<span id="cb8-8"></span>
<span id="cb8-9"><span class="co" style="color: #5E5E5E;"># create function to add letter to facet labels</span></span>
<span id="cb8-10">letter_facets <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span> (string){</span>
<span id="cb8-11">    len <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">length</span>(string)</span>
<span id="cb8-12">    string <span class="ot" style="color: #003B4F;">=</span> <span class="fu" style="color: #4758AB;">paste</span>(<span class="st" style="color: #20794D;">"("</span>, letters[<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span>len], <span class="st" style="color: #20794D;">") "</span>, string, <span class="at" style="color: #657422;">sep =</span> <span class="st" style="color: #20794D;">""</span>)</span>
<span id="cb8-13">    <span class="fu" style="color: #4758AB;">return</span>(string)</span>
<span id="cb8-14">}</span>
<span id="cb8-15"></span>
<span id="cb8-16"><span class="co" style="color: #5E5E5E;"># create plot</span></span>
<span id="cb8-17"><span class="fu" style="color: #4758AB;">ggplot</span>(long_format, <span class="fu" style="color: #4758AB;">aes</span>(species, value, <span class="at" style="color: #657422;">col =</span> species, <span class="at" style="color: #657422;">fill =</span> species)) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># add first empty plot layer</span></span>
<span id="cb8-18">  <span class="fu" style="color: #4758AB;">geom_boxplot</span>(<span class="at" style="color: #657422;">outlier.shape =</span> <span class="cn" style="color: #8f5902;">NA</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># add boxplot, do not plot the outliers</span></span>
<span id="cb8-19">  <span class="fu" style="color: #4758AB;">stat_summary</span>(<span class="at" style="color: #657422;">geom =</span> <span class="st" style="color: #20794D;">"crossbar"</span>, <span class="at" style="color: #657422;">fatten =</span> <span class="dv" style="color: #AD0000;">2</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"white"</span>, <span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.4</span>, </span>
<span id="cb8-20">               <span class="at" style="color: #657422;">fun.data =</span> <span class="cf" style="color: #003B4F;">function</span>(x){<span class="fu" style="color: #4758AB;">return</span>(<span class="fu" style="color: #4758AB;">c</span>(<span class="at" style="color: #657422;">y =</span> stats<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">median</span>(x), <span class="at" style="color: #657422;">ymin =</span> stats<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">median</span>(x), <span class="at" style="color: #657422;">ymax =</span> stats<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">median</span>(x)))}) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># add median line to the boxplots</span></span>
<span id="cb8-21">  <span class="fu" style="color: #4758AB;">geom_jitter</span>(<span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.2</span>, <span class="at" style="color: #657422;">shape =</span> <span class="dv" style="color: #AD0000;">21</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">'white'</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># add jittered raw points</span></span>
<span id="cb8-22">  <span class="fu" style="color: #4758AB;">theme_bw</span>(<span class="at" style="color: #657422;">base_size =</span> <span class="dv" style="color: #AD0000;">14</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># change theme to the one I like (others are available)</span></span>
<span id="cb8-23">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">'Species'</span>,</span>
<span id="cb8-24">       <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">'Trait measurement'</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># change labels</span></span>
<span id="cb8-25">  <span class="fu" style="color: #4758AB;">guides</span>(<span class="at" style="color: #657422;">col =</span> <span class="st" style="color: #20794D;">'none'</span>,</span>
<span id="cb8-26">         <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">'none'</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb8-27">  <span class="fu" style="color: #4758AB;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;">~</span>facet_label, <span class="at" style="color: #657422;">scales =</span> <span class="st" style="color: #20794D;">'free_y'</span>, <span class="at" style="color: #657422;">labeller =</span> <span class="fu" style="color: #4758AB;">labeller</span>(<span class="at" style="color: #657422;">facet_label =</span> letter_facets)) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># facet by the label column so the text is correct </span></span>
<span id="cb8-28">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">strip.background =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb8-29">        <span class="at" style="color: #657422;">strip.text =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">0</span>))</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/intro_to_ggplot2/index_files/figure-html/plot_facets-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>BINGO THIS LOOKS SHAMAZING.</p>
</section>
<section id="beautiful-colour-schemes-with-metbrewer" class="level3">
<h3 class="anchored" data-anchor-id="beautiful-colour-schemes-with-metbrewer">Beautiful colour schemes with MetBrewer</h3>
<p>I take a lot of time looking at colours to use in my plots. I have used <a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">viridis</a> before, the colour schemes from <a href="https://colorbrewer2.org/#type=sequential&amp;scheme=BuGn&amp;n=3">colorbrewer</a>, and Pokémon inspired colour schemes using <a href="https://github.com/timcdlucas/palettetown"><strong>palettetown</strong></a>. If you are so inclined, I have also started writing a small package (<a href="https://github.com/padpadpadpad/BrewerUoE">BrewerUoE</a>) to access the new University of Exeter colours in R.</p>
<p>However, the most beautiful colour schemes I have ever seen are those provided by <a href="https://github.com/BlakeRMills/MetBrewer"><strong>MetBrewer</strong></a>, which are palettes inspired by works at the Metropolitan Museum of Art in New York. They are just sensational, and easy to add directly to your plots! We show an example how to below, but there are more examples on MetBrewer’s GitHub.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">p1 <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb9-2">  <span class="fu" style="color: #4758AB;">scale_color_manual</span>(<span class="at" style="color: #657422;">values=</span><span class="fu" style="color: #4758AB;">met.brewer</span>(<span class="st" style="color: #20794D;">"Klimt"</span>, <span class="dv" style="color: #AD0000;">3</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values=</span><span class="fu" style="color: #4758AB;">met.brewer</span>(<span class="st" style="color: #20794D;">"Klimt"</span>, <span class="dv" style="color: #AD0000;">3</span>))</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://exeter-data-analytics.github.io/posts/intro_to_ggplot2/index_files/figure-html/plot_metbrewer-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="add-a-final-null-layer-to-allow-you-to-comment-out-layers" class="level3">
<h3 class="anchored" data-anchor-id="add-a-final-null-layer-to-allow-you-to-comment-out-layers">Add a final NULL layer to allow you to comment out layers</h3>
<p>It is common for me to play around with different layers and switch some on and off with a hashtag. If you hash out the final layer then the layer before it with a <code>+</code> carries on to the next set of code. If you add a final <code>+ NULL</code> to the plot then this behaviour doesn’t happen.</p>
<p>Lets say we wanted to see the plot without the text labels. We can turn them off by hashtagging them out (in case we want to add them back in later), and the final <code>NULL</code> means the plot still works.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">p1 <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb10-2">  <span class="co" style="color: #5E5E5E;">#geom_text(aes(x = species, y = max_bill_length + 5, label = paste('n = ', n, sep = '')), d_n, size = pts(12), col = 'black') + # add text label</span></span>
<span id="cb10-3">  <span class="cn" style="color: #8f5902;">NULL</span> <span class="co" style="color: #5E5E5E;"># add NULL layer to allow easy commenting out of layers</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/intro_to_ggplot2/index_files/figure-html/plot_null-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="awesome-ggplot2-extensions" class="level2">
<h2 class="anchored" data-anchor-id="awesome-ggplot2-extensions">Awesome ggplot2 extensions</h2>
<p><strong>gpgplot2</strong> is so popular as a plotting system that it has become its own ecosystem, with people developing tools and extensions to complement and build extra functionality to <strong>ggplot2</strong>. All of the extensions can be found <a href="https://exts.ggplot2.tidyverse.org/gallery/">here</a>, but below are some of our favourites:</p>
<ul>
<li><a href="https://mjskay.github.io/ggdist/"><strong>ggdist</strong></a> which provides geoms and stats for visualising distributions and uncertainty.</li>
<li><a href="https://guangchuangyu.github.io/ggtree-book/chapter-ggtree.html"><strong>ggtree</strong></a> to make phylogenetic trees using <strong>ggplot2</strong>.</li>
<li><a href="https://patchwork.data-imaginist.com/"><strong>patchwork</strong></a> for combining separate plots.</li>
<li><a href="https://github.com/timcdlucas/palettetown"><strong>palettetown</strong></a> for Pokémon themed colour schemes. Whats better than Charizard colours!</li>
</ul>
</section>
</section>
<section id="summary" class="level1">
<h1>Summary</h1>
<p>We have shown how publication-ready plots can quickly be made using <strong>ggplot2</strong>, and also highlighted some functions and tips we have found super useful when we make plots. I have found that making plots in <strong>ggplot2</strong> follows the 80/20 rule. You get 80% of the way there in 20% of the time, but then the finishing touches can take very, very long. Hopefully some of the code, approaches, tips, and links provided here help you get started!</p>
<p>All of the code here can be used to create your own plots Have fun!</p>
<section id="additional-resources" class="level3">
<h3 class="anchored" data-anchor-id="additional-resources">Additional Resources</h3>
<ul>
<li><strong>ggplot2</strong> <a href="https://ggplot2.tidyverse.org/">website</a></li>
<li><strong>ggplot2</strong> <a href="https://ggplot2-book.org/index.html">book</a></li>
<li><strong>ggplot2</strong> <a href="../../posts/intro_to_ggplot2/ggplot2_cheatsheet.pdf">cheatsheet</a></li>
<li>Cedric Scherer’s whole <a href="https://www.cedricscherer.com/">website</a> (I LOVE HIS VISUALISATIONS), but his <a href="https://www.cedricscherer.com/2019/08/05/a-ggplot2-tutorial-for-beautiful-plotting-in-r/#legends">tutorial</a> for creating beautiful visualisations in <strong>ggplot2</strong> is amazing.</li>
</ul>
</section>
<section id="acknowledgements" class="level3">
<h3 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h3>
<p>We did not create this content alone! Inspiration, tips, and resources have been borrowed from multiple sources.</p>
<ul>
<li>We are indebted to the <strong>tidyverse</strong> team of developers, and especially Hadley Wickham for creating and maintaining <strong>ggplot2</strong>.</li>
<li>Tips for creating the post, website, and format for the walkthroughs were taken from Stephanie Hicks’ Course <a href="https://www.stephaniehicks.com/jhustatcomputing2022/">website</a> and <a href="https://github.com/stephaniehicks/jhustatcomputing2022">source code</a>. She has a great post introducing <a href="https://www.stephaniehicks.com/jhustatcomputing2022/posts/2022-09-15-ggplot2-plotting-system-part-2/"><strong>ggplot2</strong></a> that goes into more depth than we do here.</li>
</ul>


</section>
</section>

 ]]></description>
  <category>R</category>
  <category>ggplot2</category>
  <category>tidyverse</category>
  <guid>https://exeter-data-analytics.github.io/posts/intro_to_ggplot2/index.html</guid>
  <pubDate>Fri, 24 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://exeter-data-analytics.github.io/posts/intro_to_ggplot2/Slide1.png" medium="image" type="image/png" height="81" width="144"/>
</item>
<item>
  <title>intRos: Reproducible tables with flextable</title>
  <dc:creator>Daniel Padfield</dc:creator>
  <link>https://exeter-data-analytics.github.io/posts/intro_to_flextable/index.html</link>
  <description><![CDATA[ 




<section id="outline" class="level1">
<h1>Outline</h1>
<p>As scientists we make A LOT of tables, be it of summary statistics, model parameter values, contrast tables, or anything else. It used to be common practice to copy these individually into Excel or Word and then create a table to insert into your work, but this is prone to errors. No one is perfect after all.</p>
<p>This problem has now been solved by a bunch of different packages that allow for tables to be created in R and exported to a variety of formats. This means that fewer mistakes are made, that tables can easily be remade if the data or stats change, and that the process of making your tables is completely reproducible. The R package we will introduce to do this today is <strong>flextable</strong>, but there are other options available we won’t cover here such as <a href="https://gt.rstudio.com/articles/intro-creating-gt-tables.html"><strong>gt</strong></a> and <a href="https://hughjonesd.github.io/huxtable/huxtable.html"><strong>huxtable</strong></a>. I love <strong>flextable</strong> because it seems infinitely customisable and produces tables that are formatted beautifully to go into research articles.</p>
<p><strong>flextable</strong> provides an easy and flexible way to create tables for reporting and presentations. It allows for customization of the table appearance, including cell borders, font styles, background color, and more. The package also supports different formats such as HTML, Microsoft Word, and PowerPoint. It is well suited for creating reports and presentations with a high level of formatting, while still being simple and straightforward to use. Additionally, <strong>flextable</strong> has a number of features that make it particularly useful for data visualisation, including the ability to merge cells, add custom functions for data formatting, and control the appearance of the table based on data values (i.e.&nbsp;making p values that are &lt;0.05 <strong>bold</strong>).</p>
<p><em>Note: There are likely to be more elegant ways to do some of the code we present here. If you know of a simpler/easier way then we would love for you to help contribute to this project.</em></p>
</section>
<section id="prerequisites" class="level1">
<h1>Prerequisites</h1>
<ul>
<li>Have R installed</li>
<li>Be using R for your research (or for funsies)</li>
<li>Hopefully have a table you want to make in R</li>
</ul>
</section>
<section id="learning-objectives" class="level1">
<h1>Learning objectives</h1>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Learning objectives
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>This introduction should allow you to:</strong></p>
<ul>
<li>make publication-ready tables in <strong>flextable</strong></li>
<li>format tables in <strong>flextable</strong></li>
<li>export tables created in <strong>flextable</strong></li>
<li>know where to learn more about <strong>flextable</strong></li>
</ul>
</div>
</div>
</section>
<section id="using-flextable" class="level1">
<h1>Using flextable</h1>
<p>This walkthrough will lean heavy on tools from the <strong>tidyverse</strong> for data wrangling, and the <strong>palmerpenguins</strong> package for the example data. The first thing we will do is load in the necessary packages and load in the dataset we will use to create our tables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;"># load in required packages</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">library</span>(flextable)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;">library</span>(emmeans)</span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;">library</span>(palmerpenguins)</span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;"># load in data</span></span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;">data</span>(<span class="st" style="color: #20794D;">"penguins"</span>)</span>
<span id="cb1-9">d <span class="ot" style="color: #003B4F;">&lt;-</span> penguins</span>
<span id="cb1-10"></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;"># have a look at the data</span></span>
<span id="cb1-12"><span class="fu" style="color: #4758AB;">glimpse</span>(d)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 8
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…</code></pre>
</div>
</div>
<p>This dataset contain data for 344 penguins, consisting of three species of penguins, collected from 3 islands in the Palmer Archipelago, Antarctica.</p>
<section id="make-table-of-summary-stats" class="level2">
<h2 class="anchored" data-anchor-id="make-table-of-summary-stats">Make table of summary stats</h2>
<p>It is common to make tables summarising aspects of any given dataset. We will do that here with <strong>flextable</strong>. Lets say we want to know the averages and standard deviations of body mass, bill length and bill depth of the different penguins species split by sex.</p>
<p>We can easily do this using <strong>group_by()</strong> and <strong>summarise()</strong> in <strong>dplyr</strong>. More information on these functions can be found in our tidyverse intRo.</p>
<p>Also because I dislike the behavious of factors in R sometimes, we will first convert all columns that are factors into characters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;"># convert all columns that are factors into characters</span></span>
<span id="cb3-2">d <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">mutate</span>(d, <span class="fu" style="color: #4758AB;">across</span>(<span class="fu" style="color: #4758AB;">where</span>(is.factor), as.character))</span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="co" style="color: #5E5E5E;"># create summary data</span></span>
<span id="cb3-5">d_summary <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">group_by</span>(d, species, sex) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb3-6">  <span class="fu" style="color: #4758AB;">summarise</span>(</span>
<span id="cb3-7">    <span class="co" style="color: #5E5E5E;"># calculate number in each group</span></span>
<span id="cb3-8">    <span class="at" style="color: #657422;">num_penguins =</span> <span class="fu" style="color: #4758AB;">n</span>(),</span>
<span id="cb3-9">    <span class="co" style="color: #5E5E5E;"># can use across to apply the same functions to multiple columns</span></span>
<span id="cb3-10">    <span class="fu" style="color: #4758AB;">across</span>(<span class="fu" style="color: #4758AB;">c</span>(bill_length_mm, bill_depth_mm, body_mass_g), <span class="fu" style="color: #4758AB;">list</span>(<span class="at" style="color: #657422;">mean =</span> <span class="sc" style="color: #5E5E5E;">~</span><span class="fu" style="color: #4758AB;">mean</span>(.x, <span class="at" style="color: #657422;">na.rm =</span> <span class="cn" style="color: #8f5902;">TRUE</span>), <span class="at" style="color: #657422;">sd =</span> <span class="sc" style="color: #5E5E5E;">~</span><span class="fu" style="color: #4758AB;">sd</span>(.x, <span class="at" style="color: #657422;">na.rm =</span> <span class="cn" style="color: #8f5902;">TRUE</span>))),</span>
<span id="cb3-11">    <span class="co" style="color: #5E5E5E;"># specify we want to drop the groups</span></span>
<span id="cb3-12">    <span class="at" style="color: #657422;">.groups =</span> <span class="st" style="color: #20794D;">'drop'</span>)</span>
<span id="cb3-13"></span>
<span id="cb3-14"><span class="co" style="color: #5E5E5E;"># look at our table</span></span>
<span id="cb3-15">d_summary</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 9
  species   sex    num_penguins bill_length_mm_mean bill_length_mm_sd
  &lt;chr&gt;     &lt;chr&gt;         &lt;int&gt;               &lt;dbl&gt;             &lt;dbl&gt;
1 Adelie    female           73                37.3              2.03
2 Adelie    male             73                40.4              2.28
3 Adelie    &lt;NA&gt;              6                37.8              2.80
4 Chinstrap female           34                46.6              3.11
5 Chinstrap male             34                51.1              1.56
6 Gentoo    female           58                45.6              2.05
7 Gentoo    male             61                49.5              2.72
8 Gentoo    &lt;NA&gt;              5                45.6              1.37
# ℹ 4 more variables: bill_depth_mm_mean &lt;dbl&gt;, bill_depth_mm_sd &lt;dbl&gt;,
#   body_mass_g_mean &lt;dbl&gt;, body_mass_g_sd &lt;dbl&gt;</code></pre>
</div>
</div>
<p>We can see there are some NAs for the sex of the penguins. We can make these unknown using <strong>replace_na()</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;"># replace NAs in our sex column</span></span>
<span id="cb5-2">d_summary <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">mutate</span>(d_summary, <span class="at" style="color: #657422;">sex =</span> <span class="fu" style="color: #4758AB;">replace_na</span>(sex, <span class="st" style="color: #20794D;">'unknown'</span>))</span></code></pre></div>
</div>
<p>We can immediately make this into a flextable using the <strong>flextable()</strong> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;"># make our table into a flex table</span></span>
<span id="cb6-2">table1 <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">flextable</span>(d_summary)</span>
<span id="cb6-3"></span>
<span id="cb6-4">table1</span></code></pre></div>
<div class="cell-output-display">

<div class="tabwid"><style>.cl-7b5143cc{}.cl-7b4e0ee6{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7b4f6a7a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7b4f6a8e{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7b4f733a{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b4f733b{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b4f7344{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b4f7345{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b4f7346{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b4f7347{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-7b5143cc"><thead><tr style="overflow-wrap:break-word;"><th class="cl-7b4f733a"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">species</span></p></th><th class="cl-7b4f733a"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">sex</span></p></th><th class="cl-7b4f733b"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">num_penguins</span></p></th><th class="cl-7b4f733b"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">bill_length_mm_mean</span></p></th><th class="cl-7b4f733b"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">bill_length_mm_sd</span></p></th><th class="cl-7b4f733b"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">bill_depth_mm_mean</span></p></th><th class="cl-7b4f733b"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">bill_depth_mm_sd</span></p></th><th class="cl-7b4f733b"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">body_mass_g_mean</span></p></th><th class="cl-7b4f733b"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">body_mass_g_sd</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7b4f7344"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">Adelie</span></p></td><td class="cl-7b4f7344"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">female</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">73</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">37.25753</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">2.028883</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">17.62192</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">0.9429927</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">3,368.836</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">269.3801</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b4f7344"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">Adelie</span></p></td><td class="cl-7b4f7344"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">male</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">73</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">40.39041</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">2.277131</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">19.07260</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">1.0188856</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">4,043.493</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">346.8116</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b4f7344"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">Adelie</span></p></td><td class="cl-7b4f7344"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">unknown</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">6</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">37.84000</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">2.802320</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">18.32000</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">1.2696456</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">3,540.000</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">477.1661</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b4f7344"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">Chinstrap</span></p></td><td class="cl-7b4f7344"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">female</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">34</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">46.57353</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">3.108669</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">17.58824</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">0.7811277</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">3,527.206</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">285.3339</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b4f7344"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">Chinstrap</span></p></td><td class="cl-7b4f7344"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">male</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">34</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">51.09412</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">1.564558</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">19.25294</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">0.7612730</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">3,938.971</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">362.1376</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b4f7344"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">Gentoo</span></p></td><td class="cl-7b4f7344"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">female</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">58</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">45.56379</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">2.051247</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">14.23793</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">0.5402493</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">4,679.741</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">281.5783</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b4f7344"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">Gentoo</span></p></td><td class="cl-7b4f7344"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">male</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">61</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">49.47377</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">2.720594</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">15.71803</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">0.7410596</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">5,484.836</span></p></td><td class="cl-7b4f7345"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">313.1586</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b4f7346"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">Gentoo</span></p></td><td class="cl-7b4f7346"><p class="cl-7b4f6a7a"><span class="cl-7b4e0ee6">unknown</span></p></td><td class="cl-7b4f7347"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">5</span></p></td><td class="cl-7b4f7347"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">45.62500</span></p></td><td class="cl-7b4f7347"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">1.374470</span></p></td><td class="cl-7b4f7347"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">14.55000</span></p></td><td class="cl-7b4f7347"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">0.8103497</span></p></td><td class="cl-7b4f7347"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">4,587.500</span></p></td><td class="cl-7b4f7347"><p class="cl-7b4f6a8e"><span class="cl-7b4e0ee6">338.1937</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>This already looks pretty good. But we can now add layers of formatting onto this table. The layers of formatting work much like the layers of <strong>ggplot2</strong>. You start with the base level and each new command creates new formatting of the whole table. Because of this, the order of the commands can make a big difference.</p>
<p>For this table, we will do a few different things:</p>
<ul>
<li>rename the column names</li>
<li>merge the species column vertically to only have one instance of species</li>
<li>round the numbers to 2 decimal places</li>
<li>change the font and font size</li>
<li>play around with the column names to create a tiered column name for each trait (bill length, bill depth, body mass)</li>
<li>add in some horizontal lines to split species apart</li>
</ul>
<p>We can do this by adding new layers using the <strong>%&gt;%</strong>. Many of the functions involve you specifying what <code>part</code> you want the change to apply to (‘all’, ‘body’, or ‘header’). Specific rows can be specified using the <code>i</code> argument, and columns using <code>j</code>.</p>
<p>To add a new header row, we need to create a new object which contains the text we want to add.</p>
<p>For each new thing we do, I have commented what the command is doing so that the code makes as much sense as possible.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;"># text to be new header label</span></span>
<span id="cb7-2"><span class="co" style="color: #5E5E5E;"># add same name for columns we want to merge later on</span></span>
<span id="cb7-3">pars <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">as_paragraph</span>(</span>
<span id="cb7-4">  <span class="fu" style="color: #4758AB;">as_chunk</span>(<span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">'Species'</span>, <span class="st" style="color: #20794D;">'Sex'</span>, <span class="st" style="color: #20794D;">'n'</span>, <span class="st" style="color: #20794D;">'Bill Length (mm)'</span>, <span class="st" style="color: #20794D;">'Beak Length (mm)'</span>, <span class="st" style="color: #20794D;">'Body Mass (g)'</span>))</span>
<span id="cb7-5">)</span>
<span id="cb7-6"></span>
<span id="cb7-7"></span>
<span id="cb7-8"><span class="co" style="color: #5E5E5E;"># edit table1</span></span>
<span id="cb7-9">table1 <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">flextable</span>(d_summary) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb7-10">  <span class="co" style="color: #5E5E5E;"># rename all column names</span></span>
<span id="cb7-11">  <span class="fu" style="color: #4758AB;">set_header_labels</span>(<span class="at" style="color: #657422;">species =</span> <span class="st" style="color: #20794D;">'Species'</span>,</span>
<span id="cb7-12">                    <span class="at" style="color: #657422;">sex =</span> <span class="st" style="color: #20794D;">'Sex'</span>,</span>
<span id="cb7-13">                    <span class="at" style="color: #657422;">num_penguins =</span> <span class="st" style="color: #20794D;">'n'</span>,</span>
<span id="cb7-14">                    <span class="at" style="color: #657422;">bill_length_mm_mean =</span> <span class="st" style="color: #20794D;">'mean'</span>,</span>
<span id="cb7-15">                    <span class="at" style="color: #657422;">bill_length_mm_sd =</span> <span class="st" style="color: #20794D;">'sd'</span>,</span>
<span id="cb7-16">                    <span class="at" style="color: #657422;">bill_depth_mm_mean =</span> <span class="st" style="color: #20794D;">'mean'</span>,</span>
<span id="cb7-17">                    <span class="at" style="color: #657422;">bill_depth_mm_sd =</span> <span class="st" style="color: #20794D;">'sd'</span>,</span>
<span id="cb7-18">                    <span class="at" style="color: #657422;">body_mass_g_mean =</span> <span class="st" style="color: #20794D;">'mean'</span>,</span>
<span id="cb7-19">                    <span class="at" style="color: #657422;">body_mass_g_sd =</span> <span class="st" style="color: #20794D;">'sd'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb7-20">  <span class="fu" style="color: #4758AB;">add_header_row</span>(<span class="at" style="color: #657422;">values =</span> pars, <span class="at" style="color: #657422;">colwidths =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">2</span>, <span class="dv" style="color: #AD0000;">2</span>, <span class="dv" style="color: #AD0000;">2</span>), <span class="at" style="color: #657422;">top =</span> <span class="cn" style="color: #8f5902;">TRUE</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># add header row</span></span>
<span id="cb7-21">  <span class="fu" style="color: #4758AB;">merge_v</span>(<span class="at" style="color: #657422;">j =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span>,<span class="dv" style="color: #AD0000;">2</span>,<span class="dv" style="color: #AD0000;">3</span>), <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'header'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb7-22">  <span class="fu" style="color: #4758AB;">merge_v</span>(<span class="sc" style="color: #5E5E5E;">~</span>species) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># merge multiple instances of the same species name</span></span>
<span id="cb7-23">  <span class="fu" style="color: #4758AB;">fix_border_issues</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># fix random border issues after merging</span></span>
<span id="cb7-24">  <span class="fu" style="color: #4758AB;">valign</span>(<span class="at" style="color: #657422;">valign =</span> <span class="st" style="color: #20794D;">'top'</span>, <span class="at" style="color: #657422;">j =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'body'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># align Species column</span></span>
<span id="cb7-25">  <span class="fu" style="color: #4758AB;">colformat_double</span>(<span class="at" style="color: #657422;">j =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">4</span>,<span class="dv" style="color: #AD0000;">5</span>,<span class="dv" style="color: #AD0000;">6</span>,<span class="dv" style="color: #AD0000;">7</span>,<span class="dv" style="color: #AD0000;">8</span>,<span class="dv" style="color: #AD0000;">9</span>), <span class="at" style="color: #657422;">digits =</span> <span class="dv" style="color: #AD0000;">2</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># round numbers of specific columns to 2 decimal places</span></span>
<span id="cb7-26">  <span class="fu" style="color: #4758AB;">align</span>(<span class="at" style="color: #657422;">align =</span> <span class="st" style="color: #20794D;">'center'</span>, <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'header'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># align column names centrally</span></span>
<span id="cb7-27">  <span class="fu" style="color: #4758AB;">align</span>(<span class="at" style="color: #657422;">align =</span> <span class="st" style="color: #20794D;">'left'</span>, <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'body'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># align table output to the left</span></span>
<span id="cb7-28">  <span class="fu" style="color: #4758AB;">hline</span>(<span class="at" style="color: #657422;">i =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">5</span>), <span class="at" style="color: #657422;">border =</span> <span class="fu" style="color: #4758AB;">fp_border_default</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># add in custom horizontal lines to split penguins up</span></span>
<span id="cb7-29">  <span class="fu" style="color: #4758AB;">font</span>(<span class="at" style="color: #657422;">fontname =</span> <span class="st" style="color: #20794D;">'Times'</span>, <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'all'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># set font name for the table</span></span>
<span id="cb7-30">  <span class="fu" style="color: #4758AB;">fontsize</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">12</span>, <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'all'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># set font size for the table</span></span>
<span id="cb7-31">  <span class="fu" style="color: #4758AB;">autofit</span>()</span>
<span id="cb7-32">  </span>
<span id="cb7-33"><span class="co" style="color: #5E5E5E;"># view table</span></span>
<span id="cb7-34">table1</span></code></pre></div>
<div class="cell-output-display">

<div class="tabwid"><style>.cl-7b65babe{}.cl-7b62c7fa{font-family:'Times';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7b63ec70{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7b63ec7a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7b63ec7b{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7b63f47c{width:0.933in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f47d{width:0.906in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f486{width:0.452in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f487{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f488{width:0.577in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f490{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f491{width:0.744in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f492{width:0.933in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f493{width:0.906in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f494{width:0.452in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f49a{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f49b{width:0.577in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f49c{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4a4{width:0.744in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4a5{width:0.933in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4a6{width:0.906in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4a7{width:0.452in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4ae{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4af{width:0.577in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4b0{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4b1{width:0.744in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4b8{width:0.933in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4b9{width:0.906in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4ba{width:0.452in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4bb{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4bc{width:0.577in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4c2{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4c3{width:0.744in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4c4{width:0.933in;background-color:transparent;vertical-align: top;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4cc{width:0.906in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4cd{width:0.452in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4ce{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4cf{width:0.577in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4d6{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4d7{width:0.744in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4d8{width:0.933in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4e0{width:0.906in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4e1{width:0.452in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4e2{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4e3{width:0.577in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4ea{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4eb{width:0.744in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4ec{width:0.933in;background-color:transparent;vertical-align: top;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4ed{width:0.906in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4ee{width:0.452in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4f4{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4f5{width:0.577in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4f6{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4fe{width:0.744in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f4ff{width:0.933in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f500{width:0.906in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f501{width:0.452in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f502{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f503{width:0.577in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f508{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f509{width:0.744in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f50a{width:0.933in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f50b{width:0.906in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f512{width:0.452in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f513{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f514{width:0.577in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f515{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f516{width:0.744in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f51c{width:0.933in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f51d{width:0.906in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f51e{width:0.452in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f526{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f527{width:0.577in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f528{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b63f529{width:0.744in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-7b65babe"><thead><tr style="overflow-wrap:break-word;"><th rowspan="2" class="cl-7b63f47c"><p class="cl-7b63ec70"><span class="cl-7b62c7fa">Species</span></p></th><th rowspan="2" class="cl-7b63f47d"><p class="cl-7b63ec70"><span class="cl-7b62c7fa">Sex</span></p></th><th rowspan="2" class="cl-7b63f486"><p class="cl-7b63ec70"><span class="cl-7b62c7fa">n</span></p></th><th colspan="2" class="cl-7b63f487"><p class="cl-7b63ec70"><span class="cl-7b62c7fa">Bill Length (mm)</span></p></th><th colspan="2" class="cl-7b63f487"><p class="cl-7b63ec70"><span class="cl-7b62c7fa">Beak Length (mm)</span></p></th><th colspan="2" class="cl-7b63f490"><p class="cl-7b63ec70"><span class="cl-7b62c7fa">Body Mass (g)</span></p></th></tr><tr style="overflow-wrap:break-word;"><th class="cl-7b63f49a"><p class="cl-7b63ec70"><span class="cl-7b62c7fa">mean</span></p></th><th class="cl-7b63f49b"><p class="cl-7b63ec70"><span class="cl-7b62c7fa">sd</span></p></th><th class="cl-7b63f49a"><p class="cl-7b63ec70"><span class="cl-7b62c7fa">mean</span></p></th><th class="cl-7b63f49b"><p class="cl-7b63ec70"><span class="cl-7b62c7fa">sd</span></p></th><th class="cl-7b63f49c"><p class="cl-7b63ec70"><span class="cl-7b62c7fa">mean</span></p></th><th class="cl-7b63f4a4"><p class="cl-7b63ec70"><span class="cl-7b62c7fa">sd</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td rowspan="3" class="cl-7b63f4a5"><p class="cl-7b63ec7a"><span class="cl-7b62c7fa">Adelie</span></p></td><td class="cl-7b63f4a6"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">female</span></p></td><td class="cl-7b63f4a7"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">73</span></p></td><td class="cl-7b63f4ae"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">37.26</span></p></td><td class="cl-7b63f4af"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">2.03</span></p></td><td class="cl-7b63f4ae"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">17.62</span></p></td><td class="cl-7b63f4af"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">0.94</span></p></td><td class="cl-7b63f4b0"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">3,368.84</span></p></td><td class="cl-7b63f4b1"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">269.38</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b63f4b9"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">male</span></p></td><td class="cl-7b63f4ba"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">73</span></p></td><td class="cl-7b63f4bb"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">40.39</span></p></td><td class="cl-7b63f4bc"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">2.28</span></p></td><td class="cl-7b63f4bb"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">19.07</span></p></td><td class="cl-7b63f4bc"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">1.02</span></p></td><td class="cl-7b63f4c2"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">4,043.49</span></p></td><td class="cl-7b63f4c3"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">346.81</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b63f4cc"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">unknown</span></p></td><td class="cl-7b63f4cd"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">6</span></p></td><td class="cl-7b63f4ce"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">37.84</span></p></td><td class="cl-7b63f4cf"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">2.80</span></p></td><td class="cl-7b63f4ce"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">18.32</span></p></td><td class="cl-7b63f4cf"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">1.27</span></p></td><td class="cl-7b63f4d6"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">3,540.00</span></p></td><td class="cl-7b63f4d7"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">477.17</span></p></td></tr><tr style="overflow-wrap:break-word;"><td rowspan="2" class="cl-7b63f4d8"><p class="cl-7b63ec7a"><span class="cl-7b62c7fa">Chinstrap</span></p></td><td class="cl-7b63f4e0"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">female</span></p></td><td class="cl-7b63f4e1"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">34</span></p></td><td class="cl-7b63f4e2"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">46.57</span></p></td><td class="cl-7b63f4e3"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">3.11</span></p></td><td class="cl-7b63f4e2"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">17.59</span></p></td><td class="cl-7b63f4e3"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">0.78</span></p></td><td class="cl-7b63f4ea"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">3,527.21</span></p></td><td class="cl-7b63f4eb"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">285.33</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b63f4ed"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">male</span></p></td><td class="cl-7b63f4ee"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">34</span></p></td><td class="cl-7b63f4f4"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">51.09</span></p></td><td class="cl-7b63f4f5"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">1.56</span></p></td><td class="cl-7b63f4f4"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">19.25</span></p></td><td class="cl-7b63f4f5"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">0.76</span></p></td><td class="cl-7b63f4f6"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">3,938.97</span></p></td><td class="cl-7b63f4fe"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">362.14</span></p></td></tr><tr style="overflow-wrap:break-word;"><td rowspan="3" class="cl-7b63f4ff"><p class="cl-7b63ec7a"><span class="cl-7b62c7fa">Gentoo</span></p></td><td class="cl-7b63f500"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">female</span></p></td><td class="cl-7b63f501"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">58</span></p></td><td class="cl-7b63f502"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">45.56</span></p></td><td class="cl-7b63f503"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">2.05</span></p></td><td class="cl-7b63f502"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">14.24</span></p></td><td class="cl-7b63f503"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">0.54</span></p></td><td class="cl-7b63f508"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">4,679.74</span></p></td><td class="cl-7b63f509"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">281.58</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b63f50b"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">male</span></p></td><td class="cl-7b63f512"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">61</span></p></td><td class="cl-7b63f513"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">49.47</span></p></td><td class="cl-7b63f514"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">2.72</span></p></td><td class="cl-7b63f513"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">15.72</span></p></td><td class="cl-7b63f514"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">0.74</span></p></td><td class="cl-7b63f515"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">5,484.84</span></p></td><td class="cl-7b63f516"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">313.16</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b63f51d"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">unknown</span></p></td><td class="cl-7b63f51e"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">5</span></p></td><td class="cl-7b63f526"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">45.62</span></p></td><td class="cl-7b63f527"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">1.37</span></p></td><td class="cl-7b63f526"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">14.55</span></p></td><td class="cl-7b63f527"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">0.81</span></p></td><td class="cl-7b63f528"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">4,587.50</span></p></td><td class="cl-7b63f529"><p class="cl-7b63ec7b"><span class="cl-7b62c7fa">338.19</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>This is looking really good now! We can now export this table in a variety of formats (suitable for word documents, as an image or for powerpoint). I will write an exhaustive list of them here, but I generally like using an image for as long as possible so that I do not have as many formatting issues when putting tables into Microsoft Word or Google Docs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;"># save as image</span></span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;">save_as_image</span>(table1, <span class="st" style="color: #20794D;">'where/to/save/table1.png'</span>, <span class="at" style="color: #657422;">webshot =</span> <span class="st" style="color: #20794D;">'webshot2'</span>)</span>
<span id="cb8-3"></span>
<span id="cb8-4"><span class="co" style="color: #5E5E5E;"># save for word document</span></span>
<span id="cb8-5"><span class="fu" style="color: #4758AB;">save_as_docx</span>(table1, <span class="st" style="color: #20794D;">'where/to/save/table1.docx'</span>, <span class="at" style="color: #657422;">align =</span> <span class="st" style="color: #20794D;">'center'</span>)</span>
<span id="cb8-6"></span>
<span id="cb8-7"><span class="co" style="color: #5E5E5E;"># save for powerpoint</span></span>
<span id="cb8-8"><span class="fu" style="color: #4758AB;">save_as_pptx</span>(table1, <span class="at" style="color: #657422;">path =</span> <span class="st" style="color: #20794D;">'where/to/save/table1.docx'</span>)</span></code></pre></div>
</div>
</section>
<section id="make-table-of-model-parameters" class="level2">
<h2 class="anchored" data-anchor-id="make-table-of-model-parameters">Make table of model parameters</h2>
<p>We can use very similar methods to summarise parameters from statistical models. To demonstrate this, I will fit a linear model looking at how body mass is different between species of penguins. We will then use <strong>emmeans()</strong> to extract model parameters and put them into a table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;"># do models</span></span>
<span id="cb9-2">mod1 <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">lm</span>(body_mass_g <span class="sc" style="color: #5E5E5E;">~</span> species, d)</span>
<span id="cb9-3">mod2 <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">lm</span>(body_mass_g <span class="sc" style="color: #5E5E5E;">~</span> <span class="dv" style="color: #AD0000;">1</span>, d)</span>
<span id="cb9-4"></span>
<span id="cb9-5"><span class="co" style="color: #5E5E5E;"># check for significance using an anova</span></span>
<span id="cb9-6"><span class="fu" style="color: #4758AB;">anova</span>(mod1, mod2)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Model 1: body_mass_g ~ species
Model 2: body_mass_g ~ 1
  Res.Df       RSS Df  Sum of Sq      F    Pr(&gt;F)    
1    339  72443483                                   
2    341 219307697 -2 -146864214 343.63 &lt; 2.2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="co" style="color: #5E5E5E;"># super different</span></span>
<span id="cb11-2"></span>
<span id="cb11-3"><span class="co" style="color: #5E5E5E;"># grab estimates for each species using emmeans</span></span>
<span id="cb11-4">d_params <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">emmeans</span>(mod1, <span class="sc" style="color: #5E5E5E;">~</span>species)</span>
<span id="cb11-5"></span>
<span id="cb11-6">d_params</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> species   emmean   SE  df lower.CL upper.CL
 Adelie      3701 37.6 339     3627     3775
 Chinstrap   3733 56.1 339     3623     3843
 Gentoo      5076 41.7 339     4994     5158

Confidence level used: 0.95 </code></pre>
</div>
</div>
<p>We can now turn this into a nice table using similar methods to those we used above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="co" style="color: #5E5E5E;"># text to be new header label</span></span>
<span id="cb13-2"><span class="co" style="color: #5E5E5E;"># add same name for columns we want to merge later on</span></span>
<span id="cb13-3">pars <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">as_paragraph</span>(</span>
<span id="cb13-4">  <span class="fu" style="color: #4758AB;">as_chunk</span>(<span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">'Species'</span>, <span class="st" style="color: #20794D;">'Body Mass (g)'</span>, <span class="st" style="color: #20794D;">'d.f.'</span>))</span>
<span id="cb13-5">)</span>
<span id="cb13-6"></span>
<span id="cb13-7"><span class="fu" style="color: #4758AB;">data.frame</span>(d_params) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb13-8">  <span class="co" style="color: #5E5E5E;"># rejig column name orders to have degrees of freedom at the end</span></span>
<span id="cb13-9">  <span class="fu" style="color: #4758AB;">select</span>(species, emmean, SE, lower.CL, upper.CL, df) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb13-10">  <span class="fu" style="color: #4758AB;">flextable</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb13-11">  <span class="fu" style="color: #4758AB;">set_header_labels</span>(<span class="at" style="color: #657422;">species =</span> <span class="st" style="color: #20794D;">'Species'</span>,</span>
<span id="cb13-12">                    <span class="at" style="color: #657422;">emmean =</span> <span class="st" style="color: #20794D;">'Estimate'</span>,</span>
<span id="cb13-13">                    <span class="at" style="color: #657422;">SE =</span> <span class="st" style="color: #20794D;">'s.e.'</span>,</span>
<span id="cb13-14">                    <span class="at" style="color: #657422;">df =</span> <span class="st" style="color: #20794D;">'d.f.'</span>,</span>
<span id="cb13-15">                    <span class="at" style="color: #657422;">lower.CL =</span> <span class="st" style="color: #20794D;">"2.5%CI"</span>,</span>
<span id="cb13-16">                    <span class="at" style="color: #657422;">upper.CL =</span> <span class="st" style="color: #20794D;">"97.5%CI"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb13-17">  <span class="fu" style="color: #4758AB;">add_header_row</span>(<span class="at" style="color: #657422;">values =</span> pars, <span class="at" style="color: #657422;">colwidths =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">4</span>, <span class="dv" style="color: #AD0000;">1</span>), <span class="at" style="color: #657422;">top =</span> <span class="cn" style="color: #8f5902;">TRUE</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># add header row</span></span>
<span id="cb13-18">  <span class="fu" style="color: #4758AB;">merge_v</span>(<span class="at" style="color: #657422;">j =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span>,<span class="dv" style="color: #AD0000;">6</span>), <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'header'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># merge column names together</span></span>
<span id="cb13-19">  <span class="fu" style="color: #4758AB;">italic</span>(<span class="at" style="color: #657422;">j =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">6</span>), <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'header'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># make some column names italic</span></span>
<span id="cb13-20">  <span class="fu" style="color: #4758AB;">colformat_double</span>(<span class="at" style="color: #657422;">j =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">2</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">5</span>), <span class="at" style="color: #657422;">digits =</span> <span class="dv" style="color: #AD0000;">2</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># round numbers of specific columns to 2 decimal places</span></span>
<span id="cb13-21">  <span class="fu" style="color: #4758AB;">align</span>(<span class="at" style="color: #657422;">align =</span> <span class="st" style="color: #20794D;">'center'</span>, <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'header'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># align column names centrally</span></span>
<span id="cb13-22">  <span class="fu" style="color: #4758AB;">align</span>(<span class="at" style="color: #657422;">align =</span> <span class="st" style="color: #20794D;">'left'</span>, <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'body'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># align table output to the left</span></span>
<span id="cb13-23">  <span class="fu" style="color: #4758AB;">font</span>(<span class="at" style="color: #657422;">fontname =</span> <span class="st" style="color: #20794D;">'Times'</span>, <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'all'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># set font name for the table</span></span>
<span id="cb13-24">  <span class="fu" style="color: #4758AB;">fontsize</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">12</span>, <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'all'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># set font size for the table</span></span>
<span id="cb13-25">  <span class="fu" style="color: #4758AB;">autofit</span>() <span class="co" style="color: #5E5E5E;"># fix any random size issues</span></span></code></pre></div>
<div class="cell-output-display">

<div class="tabwid"><style>.cl-7b8add6c{}.cl-7b87b164{font-family:'Times';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7b87b165{font-family:'Times';font-size:12pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7b895910{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7b89591a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7b895fe6{width:0.933in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b895fe7{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b895fe8{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b895fe9{width:0.882in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b895ff0{width:0.535in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b895ff1{width:0.933in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b895ff2{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b895ff3{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b895ff4{width:0.882in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b895ff5{width:0.535in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b895ff6{width:0.933in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b895ffa{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b895ffb{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b895ffc{width:0.882in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b895ffd{width:0.535in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b896004{width:0.933in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b896005{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b896006{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b89600e{width:0.882in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b89600f{width:0.535in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b896010{width:0.933in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b896011{width:0.869in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b896012{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b896013{width:0.882in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b896018{width:0.535in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-7b8add6c"><thead><tr style="overflow-wrap:break-word;"><th rowspan="2" class="cl-7b895fe6"><p class="cl-7b895910"><span class="cl-7b87b164">Species</span></p></th><th colspan="4" class="cl-7b895fe7"><p class="cl-7b895910"><span class="cl-7b87b164">Body Mass (g)</span></p></th><th rowspan="2" class="cl-7b895ff0"><p class="cl-7b895910"><span class="cl-7b87b165">d.f.</span></p></th></tr><tr style="overflow-wrap:break-word;"><th class="cl-7b895ff2"><p class="cl-7b895910"><span class="cl-7b87b164">Estimate</span></p></th><th class="cl-7b895ff3"><p class="cl-7b895910"><span class="cl-7b87b165">s.e.</span></p></th><th class="cl-7b895ff2"><p class="cl-7b895910"><span class="cl-7b87b164">2.5%CI</span></p></th><th class="cl-7b895ff4"><p class="cl-7b895910"><span class="cl-7b87b164">97.5%CI</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7b895ff6"><p class="cl-7b89591a"><span class="cl-7b87b164">Adelie</span></p></td><td class="cl-7b895ffa"><p class="cl-7b89591a"><span class="cl-7b87b164">3,700.66</span></p></td><td class="cl-7b895ffb"><p class="cl-7b89591a"><span class="cl-7b87b164">37.62</span></p></td><td class="cl-7b895ffa"><p class="cl-7b89591a"><span class="cl-7b87b164">3,626.67</span></p></td><td class="cl-7b895ffc"><p class="cl-7b89591a"><span class="cl-7b87b164">3,774.66</span></p></td><td class="cl-7b895ffd"><p class="cl-7b89591a"><span class="cl-7b87b164">339</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b896004"><p class="cl-7b89591a"><span class="cl-7b87b164">Chinstrap</span></p></td><td class="cl-7b896005"><p class="cl-7b89591a"><span class="cl-7b87b164">3,733.09</span></p></td><td class="cl-7b896006"><p class="cl-7b89591a"><span class="cl-7b87b164">56.06</span></p></td><td class="cl-7b896005"><p class="cl-7b89591a"><span class="cl-7b87b164">3,622.82</span></p></td><td class="cl-7b89600e"><p class="cl-7b89591a"><span class="cl-7b87b164">3,843.36</span></p></td><td class="cl-7b89600f"><p class="cl-7b89591a"><span class="cl-7b87b164">339</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b896010"><p class="cl-7b89591a"><span class="cl-7b87b164">Gentoo</span></p></td><td class="cl-7b896011"><p class="cl-7b89591a"><span class="cl-7b87b164">5,076.02</span></p></td><td class="cl-7b896012"><p class="cl-7b89591a"><span class="cl-7b87b164">41.68</span></p></td><td class="cl-7b896011"><p class="cl-7b89591a"><span class="cl-7b87b164">4,994.03</span></p></td><td class="cl-7b896013"><p class="cl-7b89591a"><span class="cl-7b87b164">5,158.00</span></p></td><td class="cl-7b896018"><p class="cl-7b89591a"><span class="cl-7b87b164">339</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Nice. This table can easily be extended to have other parameters in, and this approach can be reused for countless types of models.</p>
</section>
<section id="make-table-of-contrasts" class="level2">
<h2 class="anchored" data-anchor-id="make-table-of-contrasts">Make table of contrasts</h2>
<p>Another common thing we might want to do is look at which (if any) species have significantly different body mass to each other. We can do this by doing post-hoc contrasts between the different species, given we know there is a significant effect of species on body mass.</p>
<p>Again we can look at this using <strong>emmeans()</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">contrasts <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">emmeans</span>(mod1, pairwise <span class="sc" style="color: #5E5E5E;">~</span> species)</span>
<span id="cb14-2">contrasts<span class="sc" style="color: #5E5E5E;">$</span>contrasts</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> contrast           estimate   SE  df t.ratio p.value
 Adelie - Chinstrap    -32.4 67.5 339  -0.480  0.8807
 Adelie - Gentoo     -1375.4 56.1 339 -24.495  &lt;.0001
 Chinstrap - Gentoo  -1342.9 69.9 339 -19.224  &lt;.0001

P value adjustment: tukey method for comparing a family of 3 estimates </code></pre>
</div>
</div>
<p>We can easily turn this into a publication-ready table using <strong>flextable()</strong>. As the p values are so low, we will conver them to being &lt;0.0001 where appropriate, and convert that column to a character. This gives us more control over how <strong>flextable</strong> prints the output.</p>
<p>This is appropriate here but might not be the best way in other cases.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">contrasts<span class="sc" style="color: #5E5E5E;">$</span>contrasts <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-2">  <span class="fu" style="color: #4758AB;">data.frame</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-3">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">p.value =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(p.value <span class="sc" style="color: #5E5E5E;">&lt;</span> <span class="fl" style="color: #AD0000;">0.0001</span>, <span class="st" style="color: #20794D;">"&lt;0.0001"</span>, <span class="fu" style="color: #4758AB;">as.character</span>(<span class="fu" style="color: #4758AB;">round</span>(p.value, <span class="dv" style="color: #AD0000;">2</span>)))) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-4">  <span class="fu" style="color: #4758AB;">flextable</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-5">  <span class="fu" style="color: #4758AB;">set_header_labels</span>(<span class="at" style="color: #657422;">contrast =</span> <span class="st" style="color: #20794D;">'Contrast'</span>,</span>
<span id="cb16-6">                    <span class="at" style="color: #657422;">emmean =</span> <span class="st" style="color: #20794D;">'Estimate'</span>,</span>
<span id="cb16-7">                    <span class="at" style="color: #657422;">SE =</span> <span class="st" style="color: #20794D;">'s.e.'</span>,</span>
<span id="cb16-8">                    <span class="at" style="color: #657422;">df =</span> <span class="st" style="color: #20794D;">'d.f.'</span>,</span>
<span id="cb16-9">                    <span class="at" style="color: #657422;">t.ratio =</span> <span class="st" style="color: #20794D;">"t-ratio"</span>,</span>
<span id="cb16-10">                    <span class="at" style="color: #657422;">p.value =</span> <span class="st" style="color: #20794D;">"p value"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-11">  <span class="fu" style="color: #4758AB;">italic</span>(<span class="at" style="color: #657422;">j =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">3</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">6</span>), <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'header'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># make some column names italic</span></span>
<span id="cb16-12">  <span class="fu" style="color: #4758AB;">colformat_double</span>(<span class="at" style="color: #657422;">j =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">2</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">6</span>), <span class="at" style="color: #657422;">digits =</span> <span class="dv" style="color: #AD0000;">2</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># round numbers of specific columns to 2 decimal places</span></span>
<span id="cb16-13">  <span class="fu" style="color: #4758AB;">align</span>(<span class="at" style="color: #657422;">align =</span> <span class="st" style="color: #20794D;">'center'</span>, <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'header'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># align column names centrally</span></span>
<span id="cb16-14">  <span class="fu" style="color: #4758AB;">align</span>(<span class="at" style="color: #657422;">align =</span> <span class="st" style="color: #20794D;">'left'</span>, <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'body'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># align table output to the left</span></span>
<span id="cb16-15">  <span class="fu" style="color: #4758AB;">font</span>(<span class="at" style="color: #657422;">fontname =</span> <span class="st" style="color: #20794D;">'Times'</span>, <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'all'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># set font name for the table</span></span>
<span id="cb16-16">  <span class="fu" style="color: #4758AB;">bold</span>(<span class="sc" style="color: #5E5E5E;">~</span>p.value <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"&lt;0.0001"</span>, <span class="at" style="color: #657422;">j =</span> <span class="st" style="color: #20794D;">"p.value"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># make significant p values bold</span></span>
<span id="cb16-17">  <span class="fu" style="color: #4758AB;">fontsize</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">12</span>, <span class="at" style="color: #657422;">part =</span> <span class="st" style="color: #20794D;">'all'</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># set font size for the table</span></span>
<span id="cb16-18">  <span class="fu" style="color: #4758AB;">autofit</span>() <span class="co" style="color: #5E5E5E;"># fix any random size issues</span></span></code></pre></div>
<div class="cell-output-display">

<div class="tabwid"><style>.cl-7b9ab8ea{}.cl-7b978814{font-family:'Times';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7b97881e{font-family:'Times';font-size:12pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7b97881f{font-family:'Times';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-7b98a5b4{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7b98a5b5{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-7b98acda{width:1.563in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98acdb{width:0.924in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ace4{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ace5{width:0.744in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ace6{width:0.716in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98acee{width:0.838in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98acef{width:1.563in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98acf0{width:0.924in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98acf1{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98acf8{width:0.744in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98acf9{width:0.716in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98acfa{width:0.838in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ad02{width:1.563in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ad03{width:0.924in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ad04{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ad0c{width:0.744in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ad0d{width:0.716in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ad0e{width:0.838in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ad0f{width:1.563in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ad10{width:0.924in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ad16{width:0.66in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ad17{width:0.744in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ad18{width:0.716in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-7b98ad20{width:0.838in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-7b9ab8ea"><thead><tr style="overflow-wrap:break-word;"><th class="cl-7b98acda"><p class="cl-7b98a5b4"><span class="cl-7b978814">Contrast</span></p></th><th class="cl-7b98acdb"><p class="cl-7b98a5b4"><span class="cl-7b978814">estimate</span></p></th><th class="cl-7b98ace4"><p class="cl-7b98a5b4"><span class="cl-7b97881e">s.e.</span></p></th><th class="cl-7b98ace5"><p class="cl-7b98a5b4"><span class="cl-7b97881e">d.f.</span></p></th><th class="cl-7b98ace6"><p class="cl-7b98a5b4"><span class="cl-7b97881e">t-ratio</span></p></th><th class="cl-7b98acee"><p class="cl-7b98a5b4"><span class="cl-7b97881e">p value</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-7b98acef"><p class="cl-7b98a5b5"><span class="cl-7b978814">Adelie - Chinstrap</span></p></td><td class="cl-7b98acf0"><p class="cl-7b98a5b5"><span class="cl-7b978814">-32.43</span></p></td><td class="cl-7b98acf1"><p class="cl-7b98a5b5"><span class="cl-7b978814">67.51</span></p></td><td class="cl-7b98acf8"><p class="cl-7b98a5b5"><span class="cl-7b978814">339.00</span></p></td><td class="cl-7b98acf9"><p class="cl-7b98a5b5"><span class="cl-7b978814">-0.48</span></p></td><td class="cl-7b98acfa"><p class="cl-7b98a5b5"><span class="cl-7b978814">0.88</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b98ad02"><p class="cl-7b98a5b5"><span class="cl-7b978814">Adelie - Gentoo</span></p></td><td class="cl-7b98ad03"><p class="cl-7b98a5b5"><span class="cl-7b978814">-1,375.35</span></p></td><td class="cl-7b98ad04"><p class="cl-7b98a5b5"><span class="cl-7b978814">56.15</span></p></td><td class="cl-7b98ad0c"><p class="cl-7b98a5b5"><span class="cl-7b978814">339.00</span></p></td><td class="cl-7b98ad0d"><p class="cl-7b98a5b5"><span class="cl-7b978814">-24.50</span></p></td><td class="cl-7b98ad0e"><p class="cl-7b98a5b5"><span class="cl-7b97881f">&lt;0.0001</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-7b98ad0f"><p class="cl-7b98a5b5"><span class="cl-7b978814">Chinstrap - Gentoo</span></p></td><td class="cl-7b98ad10"><p class="cl-7b98a5b5"><span class="cl-7b978814">-1,342.93</span></p></td><td class="cl-7b98ad16"><p class="cl-7b98a5b5"><span class="cl-7b978814">69.86</span></p></td><td class="cl-7b98ad17"><p class="cl-7b98a5b5"><span class="cl-7b978814">339.00</span></p></td><td class="cl-7b98ad18"><p class="cl-7b98a5b5"><span class="cl-7b978814">-19.22</span></p></td><td class="cl-7b98ad20"><p class="cl-7b98a5b5"><span class="cl-7b97881f">&lt;0.0001</span></p></td></tr></tbody></table></div>
</div>
</div>
</section>
</section>
<section id="summary" class="level1">
<h1>Summary</h1>
<p>We have shown how to produce a range of publication-ready tables using <strong>flextable</strong> for summarising data, presenting model parameters, and contrast tables. Importantly all of these processes are reproducible and limit the chances of us making errors in our workflow.</p>
<p>All of the code here can be used to create your own tables. Have fun!</p>
<section id="additional-resources" class="level3">
<h3 class="anchored" data-anchor-id="additional-resources">Additional Resources</h3>
<ul>
<li><strong>flextable</strong> <a href="https://github.com/davidgohel/flextable/">GitHub repository</a></li>
<li><strong>flextable</strong> <a href="https://davidgohel.github.io/flextable/index.html">website</a></li>
<li><strong>flextable</strong> <a href="https://ardata-fr.github.io/flextable-book/">manual/book</a></li>
</ul>
</section>
<section id="acknowledgements" class="level3">
<h3 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h3>
<p>We did not create this content alone! Inspiration, tips, and resources have been borrowed from multiple sources.</p>
<ul>
<li>Most of the inspiration for this was taken from David Gohel’s great work in developing <strong>flextable</strong></li>
<li>Tips for creating the post, website, and format for the walkthroughs were taken from Stephanie Hicks’ Course <a href="https://www.stephaniehicks.com/jhustatcomputing2022/">website</a> and <a href="https://github.com/stephaniehicks/jhustatcomputing2022">source code</a>.</li>
</ul>


</section>
</section>

 ]]></description>
  <category>flextable</category>
  <category>R</category>
  <guid>https://exeter-data-analytics.github.io/posts/intro_to_flextable/index.html</guid>
  <pubDate>Tue, 14 Feb 2023 00:00:00 GMT</pubDate>
</item>
<item>
  <title>intRos: Managing research projects with R Studio</title>
  <dc:creator>Stephen Lang</dc:creator>
  <link>https://exeter-data-analytics.github.io/posts/intro_to_projects/index.html</link>
  <description><![CDATA[ 




<section id="outline" class="level1">
<h1>Outline</h1>
<p>When we’re doing research, we often find ourselves working on more than one research project at time. Managing multiple folders of data and code can be confusing enough, but when we throw R into the mix, things can get messy very quickly. A large part of the confusion comes from how most folks manage research projects on their own system — which was been aptly summarised by the wonderful <a href="https://twitter.com/JennyBryan">Jenny Bryan</a>:</p>
<blockquote class="blockquote">
<p><em>If the first line of your R script is</em></p>
<p><code>setwd("C:\Users\jenny\path\that\only\I\have")</code></p>
<p><em>I will come into your office and SET YOUR COMPUTER ON FIRE</em> 🔥.</p>
<p><em>If the first line of your R script is</em></p>
<p><code>rm(list = ls())</code></p>
<p><em>I will come into your office and SET YOUR COMPUTER ON FIRE</em> 🔥.</p>
</blockquote>
<p>While I won’t come and set your computer on fire (especially because I have committed both of these coding crimes in the past), I do want to teach you about two really useful tools for making your life easier for managing research projects, and much nicer for sharing code with collaborators.These two tools are <strong>R Studio projects</strong> and the <strong><code>here</code></strong> package.</p>
</section>
<section id="prerequisites" class="level1">
<h1>Prerequisites</h1>
<ul>
<li>Have <a href="https://posit.co/download/rstudio-desktop/">R and R Studio</a> installed</li>
<li>Have the <code>tidyverse</code> and <code>here</code> packages installed</li>
<li>Have a small research project that you’re ready to projectify, or some test code/data to make into a practice research project</li>
</ul>
</section>
<section id="learning-objectives" class="level1">
<h1>Learning objectives</h1>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Learning objectives
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>This introduction should allow you to:</strong></p>
<ul>
<li>Create new R Studio projects</li>
<li>Use the <code>here</code> package to create reproducible filepaths</li>
<li>Use both tools together to create research projects that are stable, shareable and easy to work with!</li>
</ul>
</div>
</div>
</section>
<section id="managing-research-projects-in-r-studio" class="level1">
<h1>Managing research projects in R Studio</h1>
<section id="whats-wrong-with-rmlist-ls-anyway" class="level3">
<h3 class="anchored" data-anchor-id="whats-wrong-with-rmlist-ls-anyway">What’s wrong with <code>rm(list = ls())</code> anyway?</h3>
<p><code>rm(list = ls())</code> is built to do one thing: wipe the slate clean by nuking your entire R environment. While this might seem like good practice each time you start coding, it actually makes life tricky if you are in the middle of analysing one dataset and want to quickly jump into another research project to do something else; clearing your environment every time means you have to start from scratch, and if you forget to run it before diving into new code, any common variables will be overwritten and madness is likely to follow.</p>
</section>
<section id="the-magic-of-rstudio-and-projects" class="level2">
<h2 class="anchored" data-anchor-id="the-magic-of-rstudio-and-projects">The Magic of RStudio and Projects</h2>
<p>R Studio is great, and if you don’t already use it I’d highly recommend starting now! R Studio is what we’d call a IDE (Integrated Development Environment) that allows us to integrate with R to do much <a href="https://posit.co/products/open-source/rstudio/">more than execute code</a>. Despite its wide use in the science community, there’s one bit of functionality that seems to regularly overlooked by many folks: “Projects”. These files — which you can start to explore from the drop-down menu in the top-right of R Studio — are designed for compartmentalising your work into separate contexts, which are great if you have multiple research projects on the go at once.</p>
<p>RStudio projects resolve the issue of <code>rm(list = ls())</code> by creating a separate R Studio instance for each new project, each with its own R session, environment, temporary files and working directory (see next section on the ‘here’ package for more on filepaths).</p>
<p>If we navigate to <code>New Project...</code> (either from <code>File</code> or the drop-down Projects toolbar in the top-right), we are given the option of creating a new R Studio project in one of three ways:</p>
<ul>
<li>New directory (i.e.&nbsp;start from an empty folder)</li>
<li>Existing directory (when you already have a folder of code and data that you want to turn into a project)</li>
<li>Version control (when you want to start version control of a project — see Next steps section for more info on this)</li>
</ul>
<p>Most of the time you’ll be starting a new project in an empty folder, so we’ll use the <code>New Directory</code> option:</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/intro_to_projects/create_project.png" class="img-fluid figure-img" width="500"></p>
</figure>
</div>
<p>Next you’re provided with a bunch of alternate project types, but we’ll go for the <code>New Project</code> option:</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/intro_to_projects/project_type.png" class="img-fluid figure-img" width="500"></p>
</figure>
</div>
<p>Lastly, we get to choose the directory name (this is the name the project folder will have, so make sure it identifies your project clearly) and where this directory will be saved (i.e where on your computer you want to keep your research project folders):</p>
<p><em>Note: If you tick the box to open in a new session (circled red), whatever you’re currently working on in R Studio won’t have to be saved and closed.</em></p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/intro_to_projects/create_new_project.png" class="img-fluid figure-img" width="500"></p>
</figure>
</div>
<p>And that’s it! You now have a nice folder ready to fill with data and code, and never need to use <code>rm(list = ls())</code> ever again. R Studio also did a couple of things for us in the background when we hit the <code>Create Project</code> button:</p>
<ol type="1">
<li>Created an <code>.Rproj</code> file in the top level of the folder (can be used to directly open each project in a new session, and also contains various options for project-specific settings)</li>
<li>Created a hidden directory <code>.Rproj.user</code> where project-specific temporary files are stored (useful if you have a session terminate unexpectedly)</li>
<li>Loaded the project into R Studio, with the project name displayed in the Projects toolbar (top-right) and also in front of the RStudio icon in the task bar (appearance differs between macOS and Windows)</li>
<li>While your root filepath would normally have started at the top of your disk drive, it should now start wherever the Project’s <code>.Rproj</code> file is (you’ll see this pathn when you first load <code>here</code>). So no more writing — <code>C:\extremely\long\filepath\that\only\I\have</code> every time (<strong>BUT</strong> see next section on the <code>here</code> package for making this even better).</li>
</ol>
</section>
<section id="best-practices-for-structuring-project-folders" class="level2">
<h2 class="anchored" data-anchor-id="best-practices-for-structuring-project-folders">Best practices for structuring project folders</h2>
<p>Once a project is created, it’s worth adding folders to contain each of the relevant types of data for your research. For most of us this usually means something like the following: <code>raw_data</code>, <code>code</code>, <code>outputs</code> (folders should only contain data relevant to the research project).</p>
<div class="cell" data-layout-align="left">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://exeter-data-analytics.github.io/posts/intro_to_projects/index_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" style="width:65.0%"></p>
<p></p><figcaption class="figure-caption">Example of what your sub-folders might look like inside your Project folder (adapted from Martin Chan’s <a href="https://martinctc.github.io/blog/rstudio-projects-and-working-directories-a-beginner's-guide/">beginner’s guide to using R Studio projects</a>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="building-robust-filepaths-with-the-here-package" class="level2">
<h2 class="anchored" data-anchor-id="building-robust-filepaths-with-the-here-package">Building robust filepaths with the <code>here</code> package</h2>
<p>R Studio projects go a long way to making simpler filepaths for our code by removing the need for <em>absolute</em> filepaths (which are specific to your system), and introducing <em>relative</em> filepaths (i.e.&nbsp;ones that start at the location of .Rproj file). That said, we can make things even better and more reproducible by making use of the <code>here</code> package. <code>here</code> helps make filepaths consistent between different operating systems. For example, while macOS users have filepaths separated by forward slashes (<code>/</code>), windows users have filepaths with backward slashes (<code>\</code>). This means that even with the shorter relative filepaths we get when using Projects, paths like <code>raw_data/2023.csv</code> will only work for macOS users, and if you share this fragile code with someone using Windows it will just throw errors.</p>
<p>In comes the <code>here</code> package to the rescue — we can use it to make reproducible filepaths that work for everyone! <code>here</code> works in a similar way to <code>file.path</code>, where we build a path to a folder or file by listing elements of the path as arguments. For example, if we had some data in a project sub folder of <code>raw_data</code> called <code>2023.csv</code>, we’d make a reproducible filepath to it by writing <code>here("raw_data, "2023.csv")</code>. <code>here</code> does some helpful stuff in the background by a) adding our project’s root directory (which you can look at by just running <code>here()</code>), b) starts evaluating path from the project up (which <code>file.path</code> doesn’t), and c) all while using the right <code>/</code> or <code>\</code> delimiter depending on your system!</p>
<p>When you want to actually use a filepath for say, reading some data with <code>read_csv</code>, you just have to provide the <code>here</code> function and folder arguments wherever you’d normally be putting a <code>Users/stephen's/long/winded/filepath/to/a/file</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">install.packages</span>(<span class="st" style="color: #20794D;">"here"</span>) <span class="co" style="color: #5E5E5E;">#install</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">library</span>(here) <span class="co" style="color: #5E5E5E;">#load</span></span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;">here</span>() <span class="co" style="color: #5E5E5E;">#this will magically show the project root directory on your machine</span></span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;">here</span>(<span class="st" style="color: #20794D;">"raw_data"</span>, <span class="st" style="color: #20794D;">"2019.csv"</span>) <span class="co" style="color: #5E5E5E;">#this builds a filepath for where you want to go</span></span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;">read_csv</span>(<span class="at" style="color: #657422;">file =</span> <span class="fu" style="color: #4758AB;">here</span>(<span class="st" style="color: #20794D;">"raw_data"</span>, <span class="st" style="color: #20794D;">"2019.csv"</span>)) <span class="co" style="color: #5E5E5E;">#build this same filepath in read_csv</span></span></code></pre></div>
</div>
</section>
<section id="next-steps" class="level2">
<h2 class="anchored" data-anchor-id="next-steps">Next steps</h2>
<p>Using these two sets of tools together, you’re now primed to do some reproducible science on as many different projects as you want! But how can we go about sharing this with other researchers if we wanted to? While you can technically share the entire project folder with collaborators directly, we can also use version control software and online repositories to manage changes to our code and make it accessible. The main way folks do this is using <a href="https://git-scm.com/">git</a> and <a href="https://github.com/">GitHub</a>, and we will do a later post on how to get set up with both in due course.</p>
<p><a href="https://exeter-data-analytics.github.io/intRos/posts.html">intRo to using git, GitHub &amp; R Studio (post coming soon)</a></p>
</section>
</section>
<section id="summary" class="level1">
<h1>Summary</h1>
<p>We’ve had a full intRoduction to getting started with R Studio Projects and <code>here</code>. The next step is to try it out for yourself on a new research project! (Hopefully this knowledge will mean no more time spent crafting obnoxiously long filepaths for <code>setwd()</code> to reply with: <em><span style="color:red;">“Error: cannot change working directory”</span></em> 🤦)</p>
<section id="additional-resources" class="level3">
<h3 class="anchored" data-anchor-id="additional-resources">Additional Resources</h3>
<ul>
<li><a href="https://posit.co/">Posit</a> (previously known as RStudio) have a wealth of information on using the RStudio IDE, including <a href="https://support.posit.co/hc/en-us/articles/200526207-Using-RStudio-Projects">this great how-to guide</a></li>
<li><a href="https://github.com/krlmlr">Kirill Müller</a>, creator of the <code>here</code> package, has a great <a href="https://here.r-lib.org/">primer for getting started</a></li>
</ul>
</section>
<section id="acknowledgements" class="level3">
<h3 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h3>
<p>We did not create this content alone! Inspiration, tips, and resources have been borrowed from multiple sources.</p>
<ul>
<li>Martin Chan’s <a href="https://martinctc.github.io/blog/rstudio-projects-and-working-directories-a-beginner's-guide/">beginner’s guide to using R Studio projects</a></li>
<li>Jenny Bryan’s <a href="https://github.com/jennybc/here_here">‘Ode to the <code>here</code> package’</a></li>
<li>Malcom Barret’s <a href="https://malco.io/2018/11/05/why-should-i-use-the-here-package-when-i-m-already-using-projects/">blog post</a> on using the <code>here</code> package alongside Projects</li>
</ul>


</section>
</section>

 ]]></description>
  <category>R</category>
  <category>RStudio projects</category>
  <category>tidyverse</category>
  <category>here</category>
  <guid>https://exeter-data-analytics.github.io/posts/intro_to_projects/index.html</guid>
  <pubDate>Tue, 03 Jan 2023 00:00:00 GMT</pubDate>
  <media:content url="https://exeter-data-analytics.github.io/posts/intro_to_projects/create_project.png" medium="image" type="image/png" height="109" width="144"/>
</item>
</channel>
</rss>
